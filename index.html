<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="stylecours.css" />
    
    <title>OWASP</title>
  </head>

  <body>

    <div class="title" id="title">Sécurisez vos applications web avec l'OWASP</div>

    <div class="content">
      <div class="sommaire">
        <h3 id="sommaire">- Sommaire -</h3>
        <ul class="list_sommaire">  
            <li><strong><a href="#identify_risk">1.1 Identifiez les risques de sécurité pour une entreprise</a></strong></li>
            <li><strong><a href="#security_rule">1.2 Identifiez les règles de sécurité à appliquer par les entreprises</a></strong></li>
            <li><strong><a href="#owasp">1.3 Découvrez l'Open Web Application Security Project (OWASP)</a></strong></li>
            <li><strong><a href="#owasp10" style='color:red'>Les 10 recommendations (OWASP)</a></strong></li>
            <li><strong><a href="#injection">2.1 Protégez votre code contre l’injection</a></strong></li>
            <li><strong><a href="#session">2.2 Empêchez le piratage de session</a></strong></li>
            <li><strong><a href="#transit_data">2.3 Protégez les données en transit</a></strong></li>
            <li><strong><a href="#data_storage">2.4 Protégez les données stockées sur une application</a></strong></li>
            <li><strong><a href="#acces">2.5 Empêchez l'exploitation des contrôles d'accès</a></strong></li>
            <li><strong><a href="#xss">2.6 Stoppez le cross-site scripting (XSS)</a></strong></li>
            <li><strong><a href="#xxe">2.7 Protégez votre code contre les failles XXE et la désérialisation non sécurisée</a></strong></li>
            <li><strong><a href="#environnement">2.8 Sécurisez votre environnement de développement</a></strong><br>
              <a href="#env">- Fichier d'environnement</a></li>
            <li><strong><a href="#security">3.1 Testez la sécurité de votre application</a></strong></li>
            <li><strong><a href="#life_cycle">3.2 Appliquez le cycle de vie du développement logiciel sécurisé</a></strong></li>
            <li><strong><a href="#owasp_top10">3.3 OWASP TOP TEN 2017</a></strong></li>
        </ul>
      </div>
      <div class="sommaire">
        <h3>- Ressource -</h3>
        <ul class="list_sommaire">
          <li><a href="https://haveibeenpwned.com/" target="_blank">have i been pwned?</a></li>
          <li><a href="https://gdpr-info.eu/" target="_blank">site web officiel du RGPD  (en anglais)</a></li>
          <li><a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees" target="_blank">CNIL RGPD</a></li>
          <li><a href="https://www.pcisecuritystandards.org/" target="_blank">site officiel du PCI DSS (en anglais)</a></li>
          <li><a href="https://www.cnil.fr/" target="_blank">CNIL</a></li>
          <li><a href="https://owasp.org/" target="_blank">L'OWASP</a></li>
          <li><a href="https://owasp.org/www-project-top-ten/2017/" target='_blank'>OWASP Recommendation</a></li>
          <li><a href="https://security.googleblog.com/2018/02/a-secure-web-is-here-to-stay.html" target='_blank'>HTTPS recommandations de Google</a></li>
          <li><a href="https://www.openssl.org/" target='_blank'>OpenSSL</a></li>
          <li><a href="https://www.zaproxy.org/docs/desktop/ui/dialogs/options/dynsslcert/" target='_blank'>SSL tutoriel</a></li>
          <li><a href="https://argon2.online/" target='_blank'>Argon2 - Crypter donnees</a></li>
          <li><a href="https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Authorization_Cheat_Sheet.md" target='_blank'>OWASP - Controle acces</a></li>
          <li><a href="https://cheatsheetseries.owasp.org/cheatsheets/XSS_Filter_Evasion_Cheat_Sheet.html" target='_blank'>OWASP XSS</a></li>
          <li><a href="https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.md" target='_blank'>XML External Entity Prevention Cheat Sheet</a></li>
          <li><a href="https://cve.mitre.org/" target='_blank'>Common Vulnerabilities and Exposures</a></li>
          <li><a href="https://owasp.org/www-project-top-ten/2017/A6_2017-Security_Misconfiguration.html" target='_blank'>OWASP - Security Misconfiguration</a></li>
        </ul>
      </div>
    </div>
    <h3 class="sommaire_fixed"><a href="#title">Index</a></h3>
    

    <h2 id="identify_risk">1.1 Identifiez les risques de sécurité pour une entreprise</h2> 
    <h3>Appréhendez l'importance de la sécurité</h3>
    80 % des attaques sur les applications web sont dues à de mauvaises pratiques de développement, qui sont à l’origine des vulnérabilités découvertes et exploitées.<br>
    <div class="remarque">
      Le site <a href="https://haveibeenpwned.com/" target="_blank">have i been pwned?</a> répertorie les différentes fuites de données liées à des sites web largement utilisés.
    </div><br>
    Dans ce cours, nous parlerons des atteintes à la protection des données qui découlent d'attaques courantes.<br>
    Ces violations sont spécifiquement liées aux applications web.
    <h3>En resume</h3>
    <ul>
      <li>Les atteintes à la protection des données sur les applications web sont courantes et se produisent même dans les grandes entreprises.</li>
      <li>Une attaque sur une application web peut faire perdre à une entreprise beaucoup d'argent et sa réputation.</li>
      <li>Le risque est mesuré en comparant la valeur des données au coût de leur sécurisation.</li>
    </ul>

    <h5><a href="#sommaire">Sommaire</a></h5>
  
    <h2 id="security_rule">1.2 Identifiez les règles de sécurité à appliquer par les entreprises</h2>
<h3>Découvrez les mesures de sécurité pour les applications web</h3>
Il existe trois principes de sécurité qui peuvent être appliqués pour garantir la sécurité d’une application ou d’une infrastructure.
<ol>
  <li><strong>La confidentialité.</strong><br> C'est l'assurance que les personnes non autorisées n'accèdent pas à des informations sensibles.</li>
  <li><strong>L'intégrité.</strong><br> Elle permet d'être sûr que les données sont fiables et n'ont pas été modifiées par des personnes non autorisées.</li>
  <li><strong>La disponibilité.</strong><br> C'est l’assurance qu'il n'y a pas de perturbation d'un service ou de l'accessibilité aux données.</li>
</ol>
La sécurité de l'information repose sur l'équilibre entre ces trois principes.<br>
Ces principes fondamentaux sont des éléments clés dans l’élaboration des politiques de sécurité en entreprise.<br>
Mais il existe également des réglementations imposées pour certains secteurs d’activités qui influencent également les politiques de sécurité des entreprises.<br> 
Il existe de nombreux règlements en fonction des domaines d’activité des entreprises, en voici quelques-uns qui pourront vous être utiles.

<h3>Identifiez les principales réglementations de sécurité pour les applications web</h3>
En 2018, le <strong>règlement général sur la protection des données (RGPD)</strong> est entré en vigueur.<br>
Il modifie la manière dont les données personnelles sont stockées et utilisées et la façon dont les entreprises les traitent.<br>
Il permet aux résidents de l'Union européenne de contrôler leurs informations personnelles, comme leur nom, leur âge, leur affiliation politique et leur orientation sexuelle, par exemple.<br>
Les entreprises ne respectant pas le RGPD sont passibles d'une amende.<br>
Bien qu'il soit basé sur la législation de l'Union européenne, il concerne tous les pays car les applications web sont disponibles dans le monde entier.<br>
Les entreprises en dehors de l’UE qui font du business avec des entreprises européennes devront respecter le RGPD pour leurs applications web à destination du marché européen.<br><br>
Un des éléments primordial et de veiller à garantir la sécurité des données personnelles stockées et échangées via l’application web.<br>
Les données collectées doivent aussi répondre à un usage spécifique.<br><br>
De plus, il est nécessaire d’avoir la possibilité de supprimer les données personnelles à la demande du client.<br>
Par exemple, si un utilisateur veut se désabonner  d'une newsletter, il faut s’assurer qu'il existe une option permettant le désabonnement.<br>
Une fois qu’une personne se désabonne, l'adresse e-mail doit être automatiquement supprimée de la base de données.<br><br>
<div class="remarque">
  Jetez un coup d'œil au <a href="https://gdpr-info.eu/" target="_blank">site web officiel du RGPD  (en anglais)</a> pour avoir plus d'informations sur la façon dont vous pouvez développer votre application web selon les normes du règlement.<br>
<a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees" target="_blank">CNIL RGPD</a>
</div>
<h4>Découvrez la norme PCI DSS</h4>
La norme <strong>Payment Card Industry Data Security Standard (PCI DSS)</strong> est une norme établie pour toutes les entreprises qui traitent des données bancaires.<br>
La sécurisation des données bancaires met l'accent sur la sécurité lors de <strong>la transmission, du traitement et du stockage des données.</strong><br><br>
De plus en plus de plateformes web et de solutions de stockage gèrent les applications pour les entreprises, il est essentiel que le fournisseur soit également conforme à la norme PCI DSS.<br>
Si vous créez une application web qui traite des données bancaires, comme une boutique en ligne ou un site web par abonnement, vous devez <strong>chiffrer les transmissions</strong> pour garantir la sécurité des données en transit.<br>
Les données bancaires transmises en texte clair constituent une violation de la norme PCI DSS, ce qui peut faire l’objet d’une amende.<br><br>
<div class="remarque">
  Si vous souhaitez en savoir plus, voici le <a href="https://www.pcisecuritystandards.org/" target="_blank">site officiel du PCI DSS (en anglais)</a>.
</div>
<h4>Appréhendez la réglementation du traitement des données de santé</h4>
Les données de santé sont des données à caractère personnel particulières car considérées comme sensibles.<br>
Elles font à ce titre l’objet d’une protection spécifique inscrite dans de nombreux textes comme le règlement européen sur la protection des données personnelles, la loi Informatique et Libertés, le Code de la santé publique, etc.,<br>
 afin de garantir le respect de la vie privée des personnes<br><br>
<div class="remarque">
  Pour en savoir plus sur le traitement des données personnelles en France, rendez-vous sur le site de la <a href="https://www.cnil.fr/" target="_blank">CNIL</a>.
</div>
<h4>Découvrez l'OWASP</h4>
<strong>L’Open Web Application Security Project (OWASP)</strong> est un organisme impartial, mondial et sans but lucratif.<br>
Il évalue les dix principaux risques pour la sécurité des applications web et préconise un développement logiciel sécurisé.<br><br>
<div class="remarque">
  <a href="https://owasp.org/" target="_blank">L'OWASP</a> organise des rencontres et des conférences ouvertes à tous à travers le monde.<br>
  Il est donc possible de rencontrer et d’échanger avec la communauté pour effectuer une veille constante.
</div><br><br>
En tant que développeur web, il est important d'apprendre comment sécuriser votre application, afin qu'elle ne soit pas vulnérable aux attaques courantes.<br>
 Le Top Ten de l'OWASP fournit des lignes directrices à suivre permettant de respecter des bonnes pratiques pour protéger une application web.<br>
  Cela vous permettra de prendre en compte la sécurité dès vos premiers développements et apportera également une crédibilité supplémentaire à vos clients ou à l’entreprise pour laquelle vous travaillez.<br>
   De plus, si vous avez besoin de développer votre application web selon les normes <strong>RGPD, PCI DSS ou autre, vous devrez d'abord la sécuriser avec l’OWASP !</strong> 
<h3>En résumé</h3>
<ul>
<li><strong>La confidentialité, l'intégrité et la disponibilité</strong> sont les principes de base de la sécurité de l'information.</li>
<li><strong>Le RGPD</strong> garantit la confidentialité des données pour les résidents de l'UE.</li>
<li><strong>PCI DSS</strong> assure la conformité de la sécurité des sites qui traitent les données bancaires.</li>
<li><strong>Le traitements des données de santé</strong> est réglementé par la CNIL et nécessite une prise en charge particulière. </li>
<li><strong>L’OWASP</strong> est une organisation à but non lucratif qui propose des référentiels sur les risques de sécurité des applications web.<br>
  Le Top Ten 2017 de l'OWASP est la dernière mise à jour sur les risques de sécurité des applications web aujourd'hui.</li>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>
  
    <h2 id="owasp">1.3 Découvrez l'Open Web Application Security Project (OWASP)</h2>

    <h3>Découvrez le principe d'une attaque web</h3>
    Les attaques web tirent parti des failles de sécurité de vos applications web.<br>
    On parle également de vulnérabilités.<br>
    Le Top Ten de l'OWASP est un document proposant une classification des attaques web les plus courantes ainsi que les contre-mesures associées. <br>
    Lors du développement d’applications, les développeurs ne sont pas forcément au fait des mesures de sécurité à appliquer, et la sécurité représente souvent une contrainte budgétaire et opérationnelle.<br>
    C'est pour cette raison qu'il est important de prendre en compte la sécurité dès les premiers développements.<br>
    En effet, une prise en compte tardive de la sécurité pourra représenter un coût supplémentaire, sans parler du risque encouru en cas d’attaque.<br><br>
<h3>Découvrez l’OWASP</h3>
<strong>L'Open Web Application Security Project (OWASP)</strong> est une organisation à but non lucratif fondée en 2004 pour prévenir de manière proactive les attaques sur les applications web.<br>
Il s'agit du premier effort de normalisation des pratiques de développement sécurisé.<br>
En 2001, l'OWASP n'était pas une organisation officielle, mais plutôt un collectif qui préconisait des pratiques de développement sécurisé.<br>
Ce collectif a pris de l'ampleur et est devenu l’OWASP foundation en 2004, avec une norme éthique pour maintenir une neutralité et l'absence de pressions commerciales.<br>
L'OWASP n'est réglementée par aucune entreprise.<br>
Elle propose un référentiel neutre permettant d’accompagner les entreprises dans le processus de sécurisation ou d’audit de sécurité.

<h3>Découvrez comment le Top Ten de l'OWASP est utilisé par les entreprises</h3>
Avec l'évolution d'Internet, les plus grandes entreprises ont une présence significative en ligne, ce qui les oblige à fournir et à maintenir des applications web.<br>
La plupart des processus internes utilisent également des applications web.<br>
Toute application qui traite des données sensibles peut être attaquée et nécessite donc une sécurité standardisée.<br>
Les entreprises qui ne traitent pas de données sensibles, mais qui ont besoin d'une plateforme web pour leur business, sont également exposées aux attaques web.<br>
Par exemple, une entreprise qui fournit des informations, comme un site d'actualité, peut ne pas avoir besoin des données personnelles de ses clients mais nécessite que le site web soit disponible pour permettre la continuité de service.<br>
Si une attaque faisait s'effondrer le site, cela aurait une incidence sur les revenus de l'entreprise.<br>
Le Top Ten de l'OWASP fournit une base de référence avec une liste de contrôles à effectuer pour atténuer les risques les plus courants en matière de sécurité.<br>
Cette base de référence est également utilisée pour répondre à des normes réglementaires plus strictes, telles que le RGPD par exemple.<br><br>
<div class="remarque">
  Pour plus d'informations, reportez-vous sur la page web de l’<a href="https://owasp.org/www-project-top-ten/2017/" target='_blank'>OWASP</a> (en anglais).
</div><br><br>
<h3 id='owasp10'>Appréhendez l'OWASP Top Ten</h3>
Dans le Top Ten de l’OWASP, les attaques sont classées par ordre d’importance.<br>
Les vulnérabilités présentes dans le Top Ten existent dans les applications web de tous les langages et frameworks.<br>
Il n'existe pas de langage de programmation exempt de vulnérabilités.<br>
Voici les 10 attaques les plus fréquentes contre les applications web, selon le Top Ten de l’OWASP en 2017.
<ol>
<li><strong>Injection</strong><br>
  Une attaque par injection est une attaque permettant l’injection de code arbitraire dans l’application.<br>
  Cela se produit lorsque des données non maîtrisées sont exécutées par le moteur présent sur le backend de l’application.<br>
  Les données de l’attaquant sont exécutées sans autorisations adéquates.<br>
  L’injection de code non autorisée peut permettre à un attaquant d’accéder à des données auxquelles il n’a normalement pas accès.</li>
  <strong><a href="#injection">2.1 Protégez votre code contre l’injection</a></strong>
<li><strong>Piratage de session</strong><br>
  Beaucoup d'applications exigent qu'un utilisateur se connecte pour arriver sur des pages auxquelles lui seul a accès.<br>
  L’application est vulnérable à une attaque si un utilisateur malveillant peut obtenir un accès non autorisé aux mots de passe, clés et jetons pour pirater la session d'un autre utilisateur.</li>
  <strong><a href="#session">2.2 Empêchez le piratage de session</a></strong>

<li><strong>Exposition de données sensibles</strong><br>
  Les données stockées ou échangées via une application doivent être protégées pour éviter l’interception par une personne malveillante.<br>
  Les bases de données qui enregistrent les données personnelles, les données de cartes de crédit, les noms d'utilisateur et les mots de passe représentent une cible de choix pour un pirate.<br>
  Si ces données ne sont pas chiffrées, elles ne sont pas sécurisées et peuvent être récupérées lorsqu’elles sont en transit par exemple.<br>
  L'utilisation de techniques de chiffrement et de pratiques de sécurité peut atténuer ce type d’attaques.
</li>
<strong><a href="#transit_data">2.3 Protégez les données en transit</a></strong>
<li><strong>Entités externes XML (XXE)</strong><br>
  Le format XML permet de faciliter l’échange de données sous forme d'arborescence.<br>
  Il est largement utilisé sur Internet.<br>
  Il peut être exploité via l’injection XXE ou XML External Entity.<br>
  XML External Entity est une attaque contre les applications qui parsent des entrées XML (exemple flux RSS).<br>
  Cette attaque a lieu lorsque l'analyseur XML est mal configuré et contient une référence à une entité externe.
</li>
<li><strong>Contournement du contrôle d’accès.</strong><br>
  Cette attaque vise les fonctionnalités des applications web qui nécessitent un contrôle d'accès.<br>
  Dans ce cas, les pirates peuvent utiliser l'URL pour contourner l'authentification, par exemple.<br>
  Ce type d’exploitation peut par exemple révéler comment une base de données est organisée.
</li>
<strong><a href="#acces">2.5 Empêchez l'exploitation des contrôles d'accès</a></strong>
<li><strong>Security Misconfiguration</strong><br>
  Une mauvaise configuration de sécurité est le plus souvent observée dans les en-têtes HTTP qui permettent de donner des indications sur la configuration du serveur, ou via la gestion des exceptions par défaut.<br>
  Les codes d'erreur et les exceptions courantes peuvent donner à un attaquant un aperçu de l'application.
</li>
<li><strong>Cross-Site Scripting  (XSS)</strong><br>
  Les failles XSS se produisent chaque fois qu'une application inclut des données non fiables dans une nouvelle page web sans validation ou échappement.<br>
  Les failles XSS permettent aux attaquants d'exécuter des scripts dans le navigateur de la victime,<br>
  ce qui peut détourner des sessions utilisateur, altérer des sites web ou rediriger l'utilisateur vers un site malveillant.
</li>
<strong><a href="#xss">2.6 Stoppez le cross-site scripting (XSS)</a></strong>
<li><strong>Désérialisation non sécurisée (Insecure Deserialisation)</strong><br>
  Une vulnérabilité de type “insecure deserialisation” permet à un utilisateur malveillant d'accéder et de modifier les fonctionnalités de l’application ciblée.
</li>
<strong><a href="#xxe">2.7 Protégez votre code contre les failles XXE et la désérialisation non sécurisée</a></strong>
<li><strong>Utilisation de composants présentant des vulnérabilités connues</strong><br>
  Même si votre application est sécurisée, vous devez vous assurer que le framework, les bibliothèques, les appels API et la plateforme que vous utilisez ne sont pas vulnérables.<br>
  Lorsqu'une nouvelle vulnérabilité est découverte, un correctif est généralement proposé.<br>
  Il faudra alors l’appliquer pour garantir la sécurité de l’application.
</li>
<li><strong>Manque de surveillance et de monitoring</strong><br>
  Pour garantir la sécurité d’une application, il est nécessaire de surveiller et de monitorer les connexions.<br>
  De nombreux serveurs vulnérables servent de rebond aux attaquants.<br>
  La mise en place de monitoring permettra de détecter une anomalie sur le serveur.
</li>
</ol><br>
<div class="remarque">
Mais, est-il possible de sécuriser le code de toutes les attaques présentes dans le Top Ten de l'OWASP ?
</div><br>
Si vous utilisez les bonnes pratiques de sécurité et que vous êtes conscient des risques, vous avez une longueur d'avance !<br>
Rappelez-vous que 80 % des applications présentent des vulnérabilités communes telles que décrites dans l'OWASP.<br>
Apprendre à les connaître et utiliser des techniques simples de développement sécurisé dont nous parlerons dans ce cours vous aidera à créer un code de qualité !

<h3>En résumé</h3>
Comme vous avez pu le voir, il y a dix types d'attaques qui sont spécifiés dans OWASP :
<ol>
<li>l'injection ;</li>
<li>le piratage de session ;</li>
<li>l'exposition de données sensibles ;</li>
<li>les entités externes XML (XXE) ;</li>
<li>le contournement des contrôles d'accès ;</li>
<li>security misconfiguration ou mauvaise configuration de sécurité ;</li>
<li>Cross-Site Scripting (XSS) ou failles XSS ;</li>
<li>la désérialisation non sécurisée ;</li>
<li>l'utilisation de composants présentant des vulnérabilités connues ;</li>
<li>le manque de surveillance et de monitoring.</li>
</ol>
Assurez-vous de bien comprendre la différence entre ces dix types d'attaques et la façon dont elles peuvent être liées à votre application web.


<h5><a href="#sommaire">Sommaire</a></h5>
  
<h2 id="injection">2.1 Protégez votre code contre l’injection</h2>
<h3>Découvrez l'injection</h3>
Cette vulnérabilité permet à un attaquant d’injecter des données non maîtrisées qui seront exécutées par l’application et qui permettent d’effectuer des actions qui ne sont normalement pas autorisées.<br>
Ces injections peuvent par exemple être des requêtes SQL pour manipuler la base de données, du code JavaScript ou HTML.<br><br>
<div class="question"><img src="media/question-circle-regular.svg">À quel endroit un attaquant effectue une injection ?</div><br>
Dans une application web, il existe des champs ou des formulaires.<br>
Ce sont des composants des applications permettant la saisie de l’utilisateur.<br>
Ces champs sont généralement la cible d’injections.<br>
Ils se présentent sous la forme d'un formulaire HTML ou d'un champ texte.<br>
Ce que vous avez tapé est ensuite traité.<br>
Si vous tapez un nom d'utilisateur et un mot de passe, ils seront alors envoyés à la base de données pour pouvoir vous authentifier.<br><br>
<div class="remarque">
  Le type d'attaque par injection le plus connu est <strong>l'injection SQL</strong>.
</div>
Dans le cas d’une attaque par injection SQL, au lieu de mettre un nom d'utilisateur et un mot de passe sur une page de connexion, un utilisateur malveillant entrera des données directement interprétées par le moteur SQL, ce qui lui permettra de modifier le comportement de votre application.<br>
Prenons un exemple de requête SQL :<br>
<div class="code">SELECT * FROM accounts WHERE username='$username' AND password='$password' </div>
<ul>
<li><div class="inner_code">SELECT</div> est un mot clé permettant de sélectionner un élément de la base de données.</li>
<li>Le caractère  <div class="inner_code">*</div>  indique que tous les éléments doivent être sélectionnés.</li>
<li><div class="inner_code">FROM</div> permet d’indiquer la table à utiliser. Dans notre cas, le nom de la table est ‘accounts’.</li>
<li><div class="inner_code">WHERE</div>  spécifie ce que vous voulez sélectionner.</li>
<li><div class="inner_code">username='$username' AND password='$password'</div> sont les paramètres spécifiques recherchés par cette requête.</li>
</ul>
Cette requête peut être formalisée par : “Dans la liste des comptes, sélectionne le nom d'utilisateur et le mot de passe qui sont associés au données spécifiées.”<br><br>
Par exemple, disons que quelqu'un a créé un compte avec le nom d'utilisateur :   <div class="inner_code">‘John’</div>, et le mot de passe :<div class="inner_code">‘ThisIsMySUperS3cr3tPass’</div>.<br>
La requête SQL sera la suivante :<br>
<div class="code">SELECT * FROM accounts WHERE username='John' AND password='ThisIsMySUperS3cr3tPass'</div><br>
Si l’utilisateur John et son mot de passe sont présents dans la base de données, l’utilisateur sera authentifié.<br>
Cette requête classique peut être contournée par le biais d’une injection SQL.<br>
L’exemple suivant nous montre un cas d’exploitation classique.<br>
<div class="code">
  $username = 1' or '1' = '1’<br>
$password = 1’ or ‘1’= ’1’
</div><br><br>
C'est ce qu'on appelle une instruction conditionnelle !<br>
Elle nécessite que les requêtes respectent des conditions pour s’exécuter.<br><br>
Dans ce champ,  <div class="inner_code">“$username = 1”</div> et <div class="inner_code">“$password = 1”</div>  sont comparés à l'instruction  <div class="inner_code">'1=1'</div>.<br>
Ici, peu importent le username et le password entrés : l’instruction sera toujours valide.<br><br>
Si nous reprenons notre requête précédente, elle sera interprétée de la manière suivante :<br>
<div class="code">
  SELECT * FROM accounts WHERE username=1' or ‘1’=’1' AND password=1' or ‘1’=’1''
</div><br><br>
Un utilisateur malveillant sera ainsi en mesure de s’authentifier avec n’importe quel compte de la base de données, en l'occurrence, ici, le premier compte de la table Account sera utilisé.


<h3>Sécurisez une application contre l’injection SQL</h3>
Pour garantir une protection contre l’injection SQL, il est possible d’utiliser un pare-feu d'application web ou WAF, pour Web Application Firewall en anglais.<br>
Ce pare-feu se place entre l'utilisateur et l’application web et permet de vérifier et d'intercepter les données envoyées.<br>
Toutefois il est également possible de sécuriser l’application directement dans le code.
<h4>Validez les entrées</h4>
La validation des entrées est une excellente pratique en tant que développeur web.<br>
Elle limite ce que l'utilisateur peut mettre dans la zone de texte.<br>
Avez-vous déjà été frustré lors de la création d'un compte parce qu'il n'était pas possible de créer un mot de passe sans chiffres ou lettres majuscules ?<br>
C'est parce que la validation des entrées a été implémentée : l'entrée est analysée après avoir appuyé sur Entrée.<br>
Cela n'empêchera pas l'injection, mais c'est une mesure que vous pouvez mettre en place pour limiter des attaques de base.<br>
En effet, les caractères spéciaux spécifiques à certains langages ne pourront pas être utilisés.<br><br>
<div class="question">Quels types de caractères peut-on limiter lors de la saisie utilisateur ?</div>
Si vous avez dit le <strong>signe égal et l'apostrophe</strong>, vous êtes sur la bonne voie !<br>
En effet, ces caractères sont interprétés par le moteur de base de données, ce qui veut dire que si un attaquant peut les rentrer dans un champ, ils pourront potentiellement altérer le fonctionnement ;<br>
 c’est le principe d’une injection SQL.
<h4>Paramétrez vos variables !</h4>
Vous pouvez écrire vos requêtes SQL en paramétrant les variables.<br>
C'est ce qu'on appelle une requête préparée.<br>
Examinons l'exemple précédent.<br>
<div class="code">
  SELECT * FROM accounts WHERE username='$username' AND password='$password'
</div><br><br>
Pour l'instant, la requête connecte la variable <div class="inner_code">$username</div> directement à la base de données, la rendant vulnérable à l'injection.<br>
Avec une requête préparée, le code ressemblerait à ceci :<br>
<div class="code">
  SELECT * FROM accounts WHERE username='@username' AND password='@password'
</div><br><br>
Les variables Nom d'utilisateur et Mot de passe sont paramétrées,<br>
elles seront donc désormais passées dans une méthode pour exécuter la requête au lieu de se connecter directement à la base de données.<br>
<div class="code">
  $username = setUser(username)<br>
$password = setPassword(password)
</div><br><br>
Il existe de nombreuses façons de sécuriser les requêtes SQL,<br>
mais comme la requête ne se connecte pas directement à la base de données,<br>
il s'agit de l'une des meilleures pratiques pour sécuriser vos données contre l'injection SQL.<br><br>
<div class="remarque">
  Les langages Java, .NET, ColdFusion, PHP et Ruby ont également des fonctions intégrées pour paramétrer vos variables.
</div>

<h4>Découvrez la différence entre requêtes SQL stockées ou dynamiques</h4>
Lorsque vous codez un champ d’entrée utilisateur sur votre application web, vous devez écrire une procédure SQL pour que la base de données sache quelles données extraire.<br>
Il y a deux façons de le faire :  <strong>stocké et dynamique</strong>.<br>
<strong>Une procédure stockée</strong> est un ensemble d'instructions SQL précompilées,<br>
stockées dans une base de données et exécutées sur demande par le système de gestion de base de données qui manipule la base de données.<br>
<strong>Une procédure dynamique</strong> est une technique de programmation qui vous permet de construire des instructions SQL de manière dynamique lors de l'exécution.<br>
Les requêtes ne seront pas stockées mais dynamiquement créées.<br><br>
Pour sécuriser les requêtes SQL dynamiques, vous pouvez utiliser la fonction  <div class="inner_code">sp_executesql</div>  dans votre procédure SQL dynamique.<br>
Voyons un exemple d’implémentation avec les variables paramétrées ci-dessous :<br>
<div class="code">
  CREATE PROCEDURE sp_owaspLogin<br>
  <br>
@bind_username varchar(10)<br>

@bind_password varchar(10)<br>
<br>
AS<br>
<br>
BEGIN<br>
<br>
DECLARE @myquery varchar(100)<br>
<br>
SET @myquery = N’SELECT login FROM accounts WHERE username = @username AND password = @password’<br>
<br>
DECLARE @bind_user nvarchar(10) = N’@username’;<br>
<br>
DECLARE @bind_pass nvarchar(10) = N’@password’;<br>
<br>
EXEC sp_executesql @myquery, @bind_user, @username = @bind_username;<br>
</div><br><br>
La requête SQL dynamique ci-dessus lie la variable ainsi que la fonction  <div class="inner_code">sp_executesql</div>  pour sécuriser le script.

<h4>Utilisez un Object Relational Mapper (ORM)</h4>
De nombreux langages disposent d'outils ORM (Object Relational Mapper) qui peuvent obfusquer votre requête, c’est-à-dire masquer son fonctionnement.<br>
Les modules ORM tels que <div class="inner_code">pg</div> et <div class="inner_code">knex</div> peuvent être utilisés avec des frameworks JavaScript.<br>
Regardons la requête SQL suivante :<br>
<div class="code">SELECT * FROM accounts WHERE username='@username' AND password='@password'  </div><br><br>
Tout d'abord, notez que  <div class="inner_code">@username</div> et <div class="inner_code">@password</div>  sont paramétrés !<br><br>
Voici un exemple de la façon dont une requête correcte sera exécutée dans votre application web à l'aide de knex Node.js.<br>
Dans le code ci-dessous, knex obfusque la requête.<br>
Cela signifie qu'il masque ce à quoi ressemble vraiment la requête SQL, ce qui permet d’ajouter une couche de sécurité supplémentaire.<br>
<div class="code">knex('accounts').where('username',john ).orWhere({password: ThisIsMySUperS3c3tPass , user: 'knex'})</div><br><br>

<h4>Sécurisez vos applications avec l’API OWASP</h4>
L'organisation OWASP dispose d'une API appelée the OWASP Enterprise Security API (ESAPI).<br>
Elle peut être utilisée pour sécuriser vos applications web.<br><br>
<div class="remarque">
  Pour en savoir plus sur l'ESAPI, visitez la <a href="https://owasp.org/www-project-enterprise-security-api/" target='_blank'>page web officielle</a>.
</div>

<h3>En résumé</h3>
<ul>
<li>Les injections peuvent inclure (mais sans s'y limiter) des commandes SQL, JavaScript, HTML ou OS.</li>
<li>Elles permettent de manipuler les entrées pour effectuer des actions et accéder à des données normalement non autorisées. </li>
<li>Vous pouvez prévenir les attaques par injection en sécurisant votre code avec la validation des entrées, les variables paramétrées, les ORM et les procédures SQL stockées.</li>
<li>Les procédures SQL dynamiques peuvent être dangereuses, donc assurez-vous d'utiliser la fonction executesql() dans la base de données pour les sécuriser.</li>
</ul>

    <h5><a href="#sommaire">Sommaire</a></h5>
  
    <h2 id="session">2.2 Empêchez le piratage de session</h2>
    L’authentification est une fonctionnalité cruciale dans votre application web pour permettre à vos utilisateurs d’accéder à leur données et à leur environnement.<br>
    Dans ce chapitre, nous allons voir comment sécuriser l’authentification.
    <h3>Définissez le piratage de session</h3>
    Le piratage de session (ou Broken Authentication) est l’attaque qui occupe la deuxième place du classement de l’OWASP depuis 2013.<br>
    Considérant qu'elle occupait la troisième place en 2010, l'OWASP démontre que l’exploitation de l’authentification est une faille courante.<br><br>
    Supposons que vous ayez un site qui exige que vous vous connectiez avec votre nom d'utilisateur et votre mot de passe pour accéder aux pages qui contiennent des informations sur votre compte.<br>
    Lorsque vous vous connectez, les informations d'identification sont transmises à la base de données.<br>
    Si le nom d'utilisateur et le mot de passe correspondent à ceux de la base de données, vous serez authentifiés pour une session.<br><br>
    <div class="remarque">
      Une session est une période de temps spécifiée pendant laquelle un utilisateur authentifié aura accès à des pages et à des activités spécifiques de l'application.
    </div> <br><br>
    À tout moment du processus d'authentification, un utilisateur malveillant peut obtenir un accès non autorisé à la session et avoir accès à des données sensibles.<br>
    Une session peut inclure des données personnelles, des données financières et l'accès à des informations protégées ou à des secrets commerciaux, par exemple.<br>
    Le piratage de l’authentification peut être automatisé avec l’utilisation de la technique de force brute, c’est-à-dire l’utilisation d’une multitude de couples identifiant/mot de passe de manière automatique, jusqu’à obtenir le bon.<br>
    Lorsqu'un utilisateur malveillant a un accès non autorisé à une liste de noms d'utilisateur et de mots de passe, une attaque appelée credential stuffing peut être utilisée pour essayer toutes les combinaisons de noms d'utilisateur et de mots de passe, jusqu'à ce que le pirate s'authentifie.<br><br>
    <div class="remarque">
      Le credential stuffing est un type d’attaque où des informations de comptes volées,<br>
      généralement des listes d'identifiants et des mots de passe associés,<br>
      sont utilisés pour obtenir un accès non autorisé à des comptes utilisateurs par le biais de demandes de connexion automatisée adressées à des applications web.
    </div><br><br>

<h3>Appréhendez l'utilisation de cookies</h3>
Un cookie HTTP (également appelé cookie web, cookie Internet, cookie de navigateur ou simplement cookie) est une petite donnée envoyée depuis un site web et stockée sur l'ordinateur de l'utilisateur par un navigateur web lorsque l'utilisateur navigue.<br>
Les cookies ont été conçus pour constituer un mécanisme fiable permettant aux sites web de mémoriser des informations importantes (telles que les éléments ajoutés au panier dans une boutique en ligne) ou d'enregistrer l'activité de navigation de l'utilisateur (en se connectant ou en enregistrant les pages consultées).<br>
Ils peuvent également être utilisés pour mémoriser des informations arbitraires que l'utilisateur a précédemment entrées dans des champs de formulaire, telles que des noms, des adresses, des mots de passe et des numéros de carte de crédit.<br>
Voilà pourquoi il représente un intérêt pour un attaquant.<br><br>
<div class="question">Que se passe-t-il lorsqu'un site demande d'accepter des cookies ?</div>
Vous vous souvenez peut-être que votre navigateur vous a averti qu'un site web nécessite l'utilisation de cookies pour que vous puissiez l'utiliser ?<br>
HTTP ne peut pas enregistrer d'informations sur votre navigateur.<br>
Un cookie est donc un fichier tiers enregistré qui donne un accès personnalisé à l'utilisateur du site.<br>
Les cookies ont été créés pour vous faciliter la vie, de sorte à ce que vous n’ayez pas besoin de vous reconnecter ou d'entrer les mêmes données encore et encore.<br>
Ils aident un site web à se souvenir de ce que vous avez fait sur leur site pour personnaliser l'expérience.<br>
Ces cookies ne sont accessibles que par le site web qui les a créés.<br><br>

Il existe deux types de cookies : les cookies de suivi et les cookies de session.
<h4>Découvrez les cookies de suivi</h4>
Les cookies de suivi sont un type de cookie spécifique distribué, partagé et lu sur au moins deux sites web non liés,<br>
 dans le but de collecter des informations ou éventuellement de vous présenter des données personnalisées.<br><br>
Supposons que j'achète des biscuits sur un site web appelé koookiestore.com, et qu'il télécharge un cookie sur mon navigateur avec des informations qui m'identifient.<br>
Toutes mes activités sur ce site seront enregistrées sur koookiestore.com via le cookie qui contient mon identifiant.<br><br>
<figure>
  <img src="media/1_cookies.png" alt="">
  <figcaption>Cookie de suivi</figcaption>
</figure><br><br>
Puis, je décide d'aller sur le site funnikaaaats.com, et soudain je vois toutes ces annonces me montrant les biscuits que je regardais sur koookiestore.com !<br>
Mais seul koookiestore.com peut accéder aux informations des cookies stockées sur son site, alors comment funnikaaaats.com a découvert que j'aime ces cookies ?<br>
funnikaaaats.com a intégré un code pour koookiestore.com à l'intérieur de son site web afin qu'il puisse accéder à votre cookie koookistore.com.<br>
Et maintenant, ces informations sont stockées sous ce cookie ID dans koookiestore.com.<br>
Maintenant, le cookie de suivi de koookiestore.com sait quels cookies et vidéos de chat vous aimez.<br>
Bien que les cookies de suivi ne peuvent pas être utilisés pour pirater une session, ils peuvent représenter un problème concernant la confidentialité et la vie privée, car ils permettent l’accès à vos habitudes de navigation.
<h4>Découvrez les cookies de session</h4>
Les cookies de session contiennent un identifiant qui identifie une session.<br>
Supposons que vous vous connectez au site web de votre banque et que vous recevez un cookie qui est stocké dans votre navigateur et qui vous garde connecté jusqu'à ce que la session expire.<br>
Dans ce cas, chaque session reçoit un ID de session.<br>
L'authentification peut être détournée si l'utilisateur malveillant devine le bon ID de session.<br>
Avec le protocole HTTP, les sites web n'ont pas la possibilité d'enregistrer des informations d'authentification ou de session sauf s'ils les stockent dans un fichier sur les navigateurs.<br>
C'est à ça que servent les cookies de session.<br><br>
Souvent, le navigateur enregistre un cookie qui contient les informations de session, l'ID de session, la date et l'heure d'expiration.<br><br>
<div class="remarque">
  Des token peuvent être utilisés pour l'authentification avec le Single Sign-On (SSO).<br>
  Un utilisateur reçoit un ticket ou un jeton après authentification, afin de se connecter à une session.<br>
  Le pirate peut accéder au jeton et le réutiliser pour s’authentifier sans avoir besoin d'un nom d'utilisateur ou d'un mot de passe.
</div>
<h4>Protégez vos cookies !</h4>
Voici quelques recommandations pour garantir la sécurité des cookies :
<ul>
<li>assurez-vous que les cookies sont chiffrés lors de la transmission via HTTPS ;</li>
<li>ne stockez pas d'informations d'identification en texte clair dans vos cookies ;</li>
<li>définissez une date d'expiration pour vos cookies-session.</li>
</ul>

<h3>Prévenez votre application des authentifications non autorisées</h3>
Des recommandations simples peuvent être appliquées :
<ul>
<li>exigez de vos utilisateurs qu'ils aient un mot de passe fort, c'est-à-dire contenant des majuscules, des minuscules, des chiffres et des caractères spéciaux.<br>
  Il sera ainsi plus difficile pour un utilisateur malveillant de trouver le mot de passe ;</li>
<li>il est également recommandé d'exiger des utilisateurs qu'ils changent régulièrement leur mot de passe en cas d’attaque de credential stuffing ;</li>
<li>mettez en place le verrouillage de compte lorsqu'un utilisateur essaie de se connecter un trop grand nombre de fois sans y parvenir.<br>
   Cela permet d'empêcher les attaques de force brute ;</li>
<li>changez ou désactivez les comptes par défaut ;</li>
<li>implémentez une authentification forte, c’est-à-dire avec plusieurs facteurs d’authentification, comme la validation par SMS ou par mail, par exemple. </li>
</ul>
Heureusement, il existe des frameworks pour vous aider à implémenter plus facilement un code sécurisé, quel que soit le langage que vous utilisez :
<ul>
<li><strong>ASP.NET Core IdentityFramework</strong> peut être intégré dans votre application web pour personnaliser vos besoins d'authentification.<br>
   L'ajout d'ASP.NET Core IdentityServer vous permet d'utiliser les techniques de développement sécurisé pour l'authentification par jeton.</li>
<li><strong>Ruby</strong> a des fonctions (gems) comme omniauth qui peuvent être implémentées pour l'authentification.</li>
<li><strong>Java</strong> a <strong>javax.security.auth</strong>, et <strong>l'API Java Authentication and Authorization Service (JAAS)</strong>, qui peuvent configurer votre authentification de la bonne façon !</li>
<li><strong>PHP</strong> a <strong>PHPSec</strong> peuvent être utilisés pour gérer la sécurité et les sessions.</li>
</ul>
<h3>Prévenez l'authentification malveillante</h3>
Voici un exemple d'entrée avant qu'elle ne soit transmise à la base de données.<br>
<div class="code">
  //Remove all characters from the email except letters, digits and !#$%&'*+-=?^_`{|}~@.[]<br>
  echo filter_var($dirtyAddress, FILTER_SANITIZE_EMAIL);
</div><br><br>
Une bonne pratique pour la validation des entrées est de vérifier toutes les entrées en supprimant les caractères non pertinents.<br> 
En Java, vous pouvez créer une méthode pour hacher le mot de passe avec le framework Spring.<br><br>
<div class="remarque">
  <strong>Le hachage</strong> permet de générer une empreinte unique pour une entrée.<br>
  Le problème est qu’il est possible d’utiliser des rainbow tables, c’est-à-dire des listes de hash préalablement calculés, puis de les utiliser avec une attaque de force brute.<br>
  Pour éviter ce genre d’attaque, il est possible d’ajouter un <strong>sel</strong> permettant d’ajouter une donnée supplémentaire, et ainsi renforcer la sécurité.
</div><br><br>
Mais comment faire, concrètement ?<br><br>
Tout d'abord, vous allez créer un objet pour l'algorithme de chiffrement, et le saler.<br>
Le salage est une méthode permettant de renforcer la sécurité des informations qui sont destinées à être hachées (par exemple des mots de passe) en y ajoutant une donnée supplémentaire afin d’empêcher que deux informations identiques conduisent à la même empreinte (au même hash).<br>
Le but du salage est de lutter contre les attaques par analyse fréquentielle (permettant l’analyse des fréquences des caractères employés), les attaques utilisant des rainbow tables, les attaques par dictionnaire et les attaques par force brute.<br>
Un sel est une séquence aléatoire utilisée en plus du chiffrement pour rendre le hachage imprévisible.<br><br>
Prenons un exemple :<br>
<div class="code">
  MessageDigest md = MessageDigest.getInstance("MD5");<br>
  md.update(salt);
</div><br><br>
Ensuite, vous entrerez votre mot de passe en utilisant l'objet salé pour assigner le hachage formaté à  <div class="inner_code">hashedPassword</div>.<br>
<div class="code">
  byte[] hashedPassword = md.digest(passwordToHash.getBytes(StandardCharsets.UTF_8))) ;
</div><br><br>
Quel que soit le langage dans lequel vous développez, il existe plusieurs solutions qui peuvent vous permettre de sécuriser votre mécanisme d'authentification !<br>
Adopter les meilleures pratiques pour la gestion des sessions et des jetons est également important car il s'agit d'une autre forme d'authentification.<br>
Les cookies de session et les jetons peuvent rendre vos sessions vulnérables.<br>
Voici quelques conseils pour vous aider à développer vos mécanismes d'identification et de validation de session :
<ul>
  <li>ne mettez pas l’ID de session dans l’URL ;</li>
  <li>limitez la durée de l'ID de session ;</li>
  <li>modifiez le nom d'ID de session par défaut</li>
</ul>
PHP possède une bibliothèque appelée SessionManager avec des fonctions qui peuvent être utilisées pour valider les sessions avec des restrictions.<br>
Voici un exemple de la fonction  <div class="inner_code">preventHijacking()</div>  du gestionnaire de sessions utilisé pour limiter une session à un hôte et à une adresse IP spécifiques.<br>
Si l'hôte et l'adresse IP ne sont pas identiques, ils ne s'authentifieront pas.<br>
Cela permet de sécuriser le mécanisme d'authentification.<br>
<div class="code">
  static protected function preventHijacking()<br>
{<br>
if(!isset($_SESSION['IPaddress']) || !isset($_SESSION['userAgent']))<br>
return false;<br>
if ($_SESSION['IPaddress'] != $_SERVER['REMOTE_ADDR'])<br>
return false;<br>
if( $_SESSION['userAgent'] != $_SERVER['HTTP_USER_AGENT'])<br>
return false;<br>
return true<br>
}<br>
</div>

<h3>Connaissez votre niveau de protection</h3>
<div class="question"><img src="media/question-circle-regular.svg">Si j'implémente toutes ces règles, mon application web sera-t-elle sécurisée ?</div><br>
Peu importe le nombre de couches de sécurité et de fonctionnalités que vous ajoutez à votre code, il y a toujours des attaques auxquelles vous ne serez pas préparé.<br>
Restez informé des nouvelles vulnérabilités afin de sécuriser votre application contre de futures attaques.<br>
Votre application n'est jamais sûre à 100% car le risque zéro n’existe pas !<br>
Cependant, en respectant ces règles, vous pouvez prévenir les attaques courantes et réduire votre surface d'attaque de 80 %.<br>
<h3>En résumé </h3>
<ul>
  <li>Le piratage d’authentification peut se produire lorsque les cookies ne sont pas sécurisés.</li>
  <li>Utilisez la validation des entrées et limitez le nombre d'essais de connexion.</li>
  <li>Les attaques par force brute et credentials stuffing sont courantes.</li>
  <li>Protégez les identifiants de session au moyen d’algorithme de chiffrement.</li>
  <li>Limitez la durée des sessions.</li>
</ul>


    <h5><a href="#sommaire">Sommaire</a></h5>
  
    <h2 id="transit_data">2.3 Protégez les données en transit</h2>
    L'exposition des données sensibles est la troisième vulnérabilité dans le top 10 de l’OWASP.  Les données stockées et transmises dans l’application doivent respecter les bonnes pratiques de sécurité.<br>
    Dans ce chapitre, nous aborderons la sécurisation des données échangées.

    <h3>Découvrez comment les données transitent la couche de transport</h3>
    Lorsque vous surfez sur Internet, votre navigateur utilise le les protocole HTTP (Hypertext Transfer Protocol) pour afficher les pages web,<br>
     et le protocole Transmission Control Protocol/Internet Protocol (TCP/IP) pour les transmettre.<br><br>
     Imaginons que vous tapez une URL dans votre barre de navigateur et que vous cliquez sur <div class="keyboard">Entrée</div><br><br>
     Votre navigateur va lancer une connexion TCP, qui va envoyer des requêtes GET et POST pour vous connecter au serveur web associé au nom de domaine ou à l'adresse IP.<br>
    Si le serveur web établit la connexion TCP avec le navigateur, une réponse avec le code status et le fichier demandé (généralement le fichier index.html pour la page web) sera transmise.<br>
    Mais dans notre cas, les données transitent en HTTP et pas en HTTPS...<br><br>
    Ceci nous amène à la première vulnérabilité.<br>
    Les données transitant en HTTP peuvent être interceptées, car elles transitent en clair.<br><br>
    <div class="question"><img src="media/question-circle-regular.svg">Comment un utilisateur malveillant peut avoir accès à cette connexion TCP ?</div><br>

<h3>Comprenez l’attaque de l’homme du milieu (MITM) </h3>
Prenons un exemple.<br>
Vous avez décidé d'aller dans votre endroit préféré pour boire un café et vous utilisez le Wi-Fi gratuit pour surfer sur certains sites.<br>
À votre insu, un pirate a décidé d'utiliser un sniffer réseau, qui enregistre les transmissions TCP directement sur son ordinateur.<br>
Vous surfez et vous vous connectez à un site en HTTP pour envoyer des articles de blog.<br>
Le pirate sera en mesure d'accéder à vos informations d'identification et au contenu de votre blog, car celui-ci n'était pas chiffré !<br>
Votre session a été détournée et l'attaquant peut ainsi voler vos données.<br>
L'attaque de l'homme du milieu (Man in the Middle, en anglais) est l'une des principales causes de détournement de session.<br>
L'attaquant se place au milieu de votre communication, intercepte les connexions réseau et capte ainsi tout ce que vous envoyez.<br>
Le vol de données et le détournement de session ne sont que quelques exemples de ce qu'un attaquant peut faire une fois sur le réseau.<br>
D'une façon ou d'une autre, si les données sont envoyées en HTTP et sont en clair, il suffit de peu d'efforts pour interpréter les données.

<h3>Utilisez HTTPS</h3>
HTTPS est la variante sécurisée de HTML qui utilise les protocoles  <strong>Secure Sockets Layer/ Transport Layer Security (SSL/TLS)</strong> pour chiffrer les transmissions.<br> 
Cela permet d'ajouter une couche de sécurité lorsque les données sont en transit.<br>
En règle générale, si vous devez vous authentifier avec un mot de passe n'importe où sur le site, utilisez HTTPS pour protéger le mot de passe lorsqu'il est transmis sur le réseau.<br>
Je vous conseille de configurer l'ensemble de votre application web avec HTTPS, qu'elle traite ou non des informations sensibles.<br>
En effet, Google marquera tous les sites HTTP comme non sécurisés pour conduire plus de sites à utiliser HTTPS.<br>
Avoir un site configuré avec HTTPS augmentera la confiance de vos utilisateurs.<br><br>
<div class="remarque">Pour en savoir plus, vous pouvez visiter la page de <a href="https://security.googleblog.com/2018/02/a-secure-web-is-here-to-stay.html" target='_blank'>recommandations de Google</a>.</div><br><br>
<div class="question"><img src="media/question-circle-regular.svg">Comment utiliser le protocole TLS pour sécuriser une application ?</div><br><br>
Tout d'abord, obtenez un <strong>certificat SSL</strong> et ajoutez-le à votre serveur.<br>
Ce certificat est nécessaire pour chiffrer les données en cours de transmission.<br>
Ensuite, codez vos pages avec HTTPS !<br><br>
Si vous voulez en savoir plus sur le processus d'obtention d'un certificat SSL pour votre application web,<br>
 vous pouvez utiliser <a href="https://www.openssl.org/" target='_blank'>OpenSSL</a> (en anglais) ou consulter ce <a href="https://www.zaproxy.org/docs/desktop/ui/dialogs/options/dynsslcert/" target='_blank'>tutoriel</a> (en anglais). 


<h3>Mettez en place le HTTPS</h3>
Pour créer un serveur web pour votre application web, Node.js est une plateforme populaire.<br>
Cependant, il utilise HTTP par défaut pour la transmission de données.<br>
Pour utiliser HTTPS, Il suffit de spécifier l'utilisation du module HTTPS sur Node.js.<br><br>
Pour démarrer un serveur HTTP sur Node.js, le code est le suivant :<br>
<div class="code">
  var http = require('http');<br>
  <br>
  http.createServer(function (req, res) {<br>
    <br>
  }).listen(8080);
</div><br><br>
Il vous suffit d'ajouter un S et vous pouvez maintenant démarrer un serveur HTTPS tout aussi facilement (avec un certificat SSL, bien sûr).<br><br>
<div class="code">
  var https = require('https');<br>
  <br>
  https.createServer(function (req, res) {<br>
    <br>
  }).listen(8080);
</div><br><br>
<strong>ASP.NET</strong> a un module appelé <strong>SecureWebPageModule</strong>, qui peut être ajouté au web.config avec l'ajout suivant :<br>
<div class="inner_code">< secureWebPages enabled="true"></secureWebPages></div>.<br>
<div class="inner_code">[RequireHttps]</div>  peut également être utilisé dans le fichier <div class="inner_code">AccountController.cs</div>.<br>
Enfin, ASP. NET prend en charge la réécriture d'URL.<br><br>
Avec <strong>Ruby on Rails</strong>, vous pouvez exécuter un serveur web NGINX en utilisant HTTPS, et créer votre certificat :
  <ul>
<li>sur le fichier <strong>production.rb</strong>, changez la valeur <div class="inner_code">config.force_ssl = true</div> ;</li>
<li>sur <strong>application.rb</strong>, écrivez la ligne  <div class="inner_code">config.force_ssl = (ENV[ENABLE_HTTPS"] == "yes")</div> ;</li>
<li>utilisez Rack pour forcer SSL en intégrant la gem rack-ssl.</li>
  </ul>
Quel que soit le langage que vous utilisez, assurez-vous que votre page de connexion et toutes les pages web qui font partie de la session utilisent HTTPS.

<h3>Sécurisez les requêtes GET et POST</h3>
Lorsque vous mettez en place des connexions TCP dans vos requêtes, quelques règles de sécurité peuvent être mises en place.<br><br>
<div class="remarque">
  Lorsque la connexion TCP est établie entre le navigateur et le serveur web, les informations envoyées sont divisées en trois parties.<br>
  Tout d'abord, il y aura une requête GET ou POST avec une URL spécifique.<br>
  Ensuite, il y a un en-tête (header) et le corps de la requête (body).
</div><br>
Une requête GET ressemble à ceci :<br>
<div class="code">
  GET /index.html HTTP:1.1<br>
  Header:<br>
  Body:
</div><br><br>
Ses paramètres sont présents dans l'URL, et sont mis en cache dans le navigateur.<br>
Il est préférable d'utiliser une requête GET lorsque vous récupérez des informations.<br>
Cela signifie que vous pouvez interroger la base de données, mais sans modification.<br><br>

Une requête POST ressemble à ceci :<br>
<div class="code">
  POST https://securesite.com/resetpassword.php<br>
Header:<br>
Body: password=password123 (encrypted)
</div><br><br>
Les requêtes POST sont utilisées pour apporter des modifications à la base de données et doivent donc être transmises avec un chiffrement par TLS.<br>
Ces requêtes ne permettent pas de sauvegarder les données en cache dans le navigateur,<br>
rendant ainsi les paramètres  contenus dans le corps de la requête facilement piratables.<br><br>
<div class="question"><img src="media/question-circle-regular.svg">Comment être sûr que mes requêtes GET et POST ne sont pas exposées à des vulnérabilités ? </div><br><br>
<div class="remarque">
  Vous pouvez coder jusqu'à obtenir quelque chose de parfait, mais il est également possible d'utiliser des modules externes comme Ajax, Axios ou jQuery.
</div><br><br>
Ces modules externes vous permettront de vous assurer que vous utilisez HTTPS pour toutes vos requêtes GET et POST.<br><br>

<h3>Tirez parti de la sécurité par défaut de votre navigateur</h3>
Parlons maintenant de <strong>Cross-Origin Resource Sharing (CORS)</strong>.<br><br>
Votre navigateur fournit une sécurité à vos requêtes GET et POST par défaut.<br>
Lorsqu'une demande est faite, elle ne sera autorisée que si elle a la même origine.<br>
Cela signifie qu'elle doit avoir les mêmes nom de domaine, port, hôtes et schémas.<br>
Cette restriction n'est pas toujours utile si les requêtes nécessitent une transmission vers un autre port ou domaine.<br>
Lorsque cela se produit, l'application web est exposée à une attaque CSRF.<br><br>
<div class="remarque">
Le cross-site request forgery (CSRF) est un type de vulnérabilité des services d'authentification web.<br>
L’objet de cette attaque est de transmettre à un utilisateur authentifié une requête HTTP falsifiée qui pointe sur une action interne au site,<br>
afin qu'il l'exécute sans en avoir conscience et en utilisant ses propres droits.
</div><br><br>
<div class="question"><img src="media/question-circle-regular.svg">Comment résoudre ce problème ?</div><br>
CORS peut être implémenté pour éviter les attaques CSRF, en ajoutant des politiques pour limiter l'accès à une origine spécifique ou un type de requête HTTP, par exemple.<br><br>

<h4>Erreurs de CORS - Node.js</h4>
CORS signifie « <strong>Cross Origin Resource Sharing</strong> ».<br>
Il s'agit d'un système de sécurité qui, par défaut, bloque les appels HTTP d'être effectués entre des serveurs différents, ce qui empêche donc les requêtes malveillantes d'accéder à des ressources sensibles.<br>
Dans notre cas, nous avons deux origines :<strong><u> localhost:3000 </u></strong> et <strong><u> localhost:4200 </u></strong>, et nous souhaiterions qu'elles puissent communiquer entre elles.<br>
Pour cela, nous devons ajouter des headers à notre objet <strong><u> response </u></strong>.<br><br>

Dans le fichier <strong><u> app.js </u></strong>, ajoutez le <strong>middleware</strong> suivant avant la route d'API :<br>
<div class="tableau_double" style="display: flex;">
  <div class="code">
    app.use((req, res, next) => {<br>
      res.setHeader('Access-Control-Allow-Origin', '*');<br>
      res.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content, Accept, Content-Type, Authorization');<br>
      res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, PATCH, OPTIONS');<br>
      next();<br>
    });<br>
  </div>
  <ul>Ces headers permettent :
    <li>d'accéder à notre API depuis n'importe quelle origine ( <strong><u>'*'</u></strong> ) ;</li>
    <li>d'ajouter les headers mentionnés aux requêtes envoyées vers notre API (<strong><u> Origin </u></strong>,<strong><u> X-Requested-With </u></strong>, etc.) ;</li>
    <li>d'envoyer des requêtes avec les méthodes mentionnées ( <strong><u> GET </u></strong>,<strong><u> POST </u></strong>, etc.).</li>
  </ul>
</div><br>

<h3>Adoptez les bonnes pratiques</h3>
Voici quelques recommandations pour protéger vos données en transit :
<ol>
<li>N'utilisez GET que pour récupérer des informations.</li>
<li>Utilisez POST pour les informations qui seront manipulées.</li>
<li>Toutes les requêtes POST doivent utiliser HTTPS/SSL pour s'assurer que le corps est chiffré.</li>
<li>Vérifiez tous les modules tiers que vous utilisez pour créer des requêtes GET/POST et utilisez HTTPS pour chacun d'entre eux !</li>
</ol>

<h3>En résumé</h3>
<ul>
<li>Utilisez le HTTPS pour l'ensemble de votre site, même s'il ne contient pas de données sensibles.</li>
<li>Utilisez les requêtes GET pour récupérer les informations et POST pour modifier les informations.</li>
<li>Sécurisez vos cookies pour qu'ils soient transmis par l'en-tête et via HTTPS.</li>
<li>Sécurisez vos sessions en ajoutant une date d'expiration,<br> en sécurisant l'ID et en ne mettant pas cet ID dans l'URL.</li>
<li>L'utilisation du chiffrement dans la couche Transport peut prévenir les attaques MITM !</li>
</ul>


  <h5><a href="#sommaire">Sommaire</a></h5>
    
  <h2 id="data_storage">2.4 Protégez les données stockées sur une application</h2> 
Dans le chapitre précédent, nous avons parlé de la sécurisation des données lors de leur transmission.<br>
Mais où sont stockées les données et comment les protéger ?<br>
Lorsque vous visitez un site web et que vous entrez des données dans un formulaire, comme un nom d’utilisateur et un mot de passe,<br>
ces données sont ensuite envoyées et une requête sur la base de données est effectuée, pour vérifier que l’utilisateur existe et que le mot de passe entré est le bon.<br>
S’ils correspondent, le serveur vous donne accès à vos données stockées sur la base de données.<br>
Les données stockées sont donc le contenu de la base de données.<br>
Typiquement, une base de données contiendra des données sensibles sur un site qui nécessite une authentification.<br>
Nous savons comment effectuer des requêtes dans la base de données afin de prévenir les modifications non autorisées et l'exposition de la base de données.<br>
Mais si un attaquant arrive à contourner l’authentification, comment pouvons-nous restreindre son accès aux données ?<br>
Pour cela, il existe un moyen sûr, <strong>le chiffrement des données</strong>.

<h3>Découvrez les algorithmes de hachage</h3>
Pour protéger certaines données stockées sur une application, il est possible d’utiliser des algorithmes de hachage.<br>
L'intérêt des algorithmes de hachage est qu’ils permettent de calculer une empreinte (ou hash) d’une chaîne de caractères, par exemple.<br>
Cette empreinte est utile pour éviter de stocker en clair le mot de passe dans la base de données.<br><br>
Prenons un exemple.<br>
Nous avons une chaîne de caractères <div class="inner_code">password123</div>.<br>
Nous allons utiliser un algorithme de hachage pour obtenir une empreinte.<br>
Dans notre exemple, nous allons utiliser les algorithmes de hachage SHA1 et MD5.<br>
Nous obtenons l'empreinte suivante :<br>
<div class="code">
  sha1:bab1298d948ebb34bd0f3faf5e596ebc0b27c615<br>
  md5:7576f3a00f6de47b0c72c5baf2d505b0
</div><br><br>
<div class="remarque">
  <strong>SHA-1</strong> (Secure Hash Algorithm) et <strong>MD5</strong> (message-digest algorithm) sont des fonctions de hachage cryptographique. 
</div><br><br>
La chaîne de caractères <div class="inner_code">password123</div> est désormais stockée sous la forme d'un hash MD5, rendant sa lecture impossible pour un utilisateur malveillant.<br><br>
Cependant, certains attaquants réussiront tout de même à contourner ce mécanisme.<br>
Comme pour les cookies, il est possible d’effectuer une attaque par rainbow table,<br>
c’est-à-dire qu’un attaquant va préalablement calculer des hash de mots de passe puis les utiliser avec une attaque de brute force pour trouver le bon.<br><br>
Comme pour l'authentification, il est possible de contourner cette attaque en utilisant le salage.<br><br>
Sachez qu'il existe de nombreux algorithmes de hachage : Bcrypt, Scrypt, SHA, MD5, Argon2 et PBKDF2, par exemple.<br>
Contrairement aux algorithmes SHA et MD5, Argon2, PBKDF2, Bcrypt et Scrypt sont plus axés sur la sécurité que sur l'efficacité.<br>
Cela signifie que le cassage de ces algorithmes exige plus de ressources.<br>
Argon2 est un des algorithmes de hachage les plus puissants et fortement recommandés par l'OWASP. 
<a href="https://argon2.online/" target='_blank'>Argon2</a>


<h3>Sécurisez une base de données</h3>
<h4>Gérez l'authentification</h4>
Pour sécuriser l’authentification, il existe de bonnes pratiques de sécurité simples à appliquer :
<ul>
<li>supprimer les comptes par défaut en changeant les mots de passe connus ;</li>
<li>utiliser le principe de moindre privilège pour vous assurer qu'un ou deux comptes seulement ont des privilèges élevés.</li>
</ul><br><br>
<div class="remarque">
  <strong>Le principe de moindre privilège</strong> est un autre concept fondamental de la sécurité des systèmes d’information.<br>
  Avec le moins de privilèges possible, vous vous assurez que tous les membres de l'organisation n'ont que les droits dont ils ont besoin sur le réseau pour exercer leur fonction spécifique définie, ni plus ni moins. 
</div><br><br>


<h4>Cachez des données sensibles dans une base de données</h4>
Il existe plusieurs techniques qui permettent de cacher les données sensibles d’une base de données et donc de sécuriser une application.
<ul>
<li><strong>L'anonymisation</strong><br>
  est une technique recommandée par l’OWASP pour cacher des données privées en chiffrant, brouillant et supprimant des parties des données.<br>
  Par exemple, si une demande est faite pour la date de naissance d'une personne pour s’authentifier, seule l'année sera fournie par la base de données.</li>
<li><strong>La pseudonymisation</strong><br>
  est une technique recommandée par le RGPD.<br>
  Elle remplace les données personnelles par des identifiants et des pseudonymes artificiels pour cacher les données sensibles.</li>
<li><strong>La minimisation des données</strong><br>
  permet de se conformer à l'ensemble de règles du RGPD.<br>
  L'entreprise doit uniquement demander, enregistrer et traiter les données personnelles requises.<br>
  En d'autres termes, toute donnée personnelle demandée doit avoir un motif commercial solide.</li>

  Il existe deux façons d'appliquer ces techniques à votre base de données.

<li><strong>Le masquage dynamique des données</strong><br>
  permet de se conformer à l'ensemble de règles du RGPD.<br>
  est un moyen d'appliquer des règles d'anonymisation sur les colonnes de données sensibles.<br>
  Lorsqu'une demande est faite pour récupérer les données des colonnes masquées, elle n'apparaîtra pas dans sa forme complète.<br>
  Ces données peuvent également être cachées aux administrateurs de bases de données avec des rôles qui bloquent l'accès aux données sensibles.
</li>
Sur <strong>SQL Server</strong>, l'option <div class="inner_code">masked with</div> applique différentes fonctions de masquage.<br>
L’option par défaut prend la valeur sensible et la remplace par une autre valeur lorsqu'elle est affichée.<br>
L'exemple ci-dessous montre son application sur une colonne Date de naissance.<br>
<div class="code">
  Birthdate DATE<br>
  MASKED WITH (FUNCTION = 'default()') NOT NULL,
</div><br><br>
<strong>MongoDB</strong> a la possibilité d'utiliser un module appelé <strong>Mongo Mask</strong>.<br>
Il peut être utilisé comme ceci sur l’application :<br>
<div class="code">var mongoMask = require('mongo-mask')</div><br>
Sur la base de données, MongoDB a des accès en lecture seule qui peuvent être spécifiés dans le code. 

<li><strong>Cloner et générer des masques de données</strong><br>
  utilisant plusieurs bases de données.<br>
  En utilisant le même schéma, une base de données supplémentaire utilisée pour récupérer des informations<br>
  peut contenir des données masquées pour les colonnes sensibles déjà présentes.
</li>

</ul>
<strong>SQL Server</strong>, <strong>SQL Clone</strong> et <strong>SQL Data Generator</strong> peuvent être utilisés pour créer une autre base de données avec des données générées pour masquer les données sensibles lors de leur récupération.<br>
Contrairement au masquage dynamique des données, il ne s'agit pas d'un masquage actif.<br>
Il s'agit d'une redirection de requête vers une autre base de données avec des données générées pour remplacer les données sensibles.

<h3>En résumé</h3>
<ul>
<li>Sécurisez votre base de données avec le chiffrement.</li>
<li>Utilisez des algorithmes de hachage sécurisés tels que Argon2, Scrypt, Bcrypt et PBKDF2.</li>
<li>Utilisez pas les algorithmes de hachage SHA et MD5 avec salage.</li>
<li>Les tables Rainbow automatisent les connexions avec des mots de passe préhashés !</li>
<li>Le masquage des données peut être utilisé pour sécuriser les données sensibles d’une base de données.</li>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>
  
<h2 id="acces">2.5 Empêchez l'exploitation des contrôles d'accès</h2> 

<h3>Comprenez le principe du contrôle d'accès</h3>
Imaginez une application web avec quatre niveaux d’accès pour quatre groupes de personnes.<br>
Le premier groupe aura un accès limité,<br>
le deuxième groupe aura un accès un peu plus privilégié,<br>
le troisième groupe aura encore plus d’accès.<br>
Enfin, le quatrième groupe aura les accès administrateur ou root.<br><br>
Ces niveaux d’accès sont appelés rôles.<br><br>
<div class="remarque">
  Pour en savoir plus, vous pouvez visiter cet aide-mémoire de l’<a href="https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Authorization_Cheat_Sheet.md" target='_blank'>OWASP - Authorization Cheat Sheet</a>.
</div><br><br>
Imaginons les quatre rôles suivant.
<table>
  <tr>
      <th>Rôle</th>
      <th>Niveau<br> d'accès</th>
  </tr>
  <tr>
      <td>guppy</td>
      <td>1</td>
  </tr>
  <tr>
      <td>poisson</td>
      <td>2</td>
  </tr>
  <tr>
      <td>dauphin</td>
      <td>3</td>
  </tr>
  <tr>
      <td>baleine</td>
      <td>4</td>
  </tr>
</table>
Dans cet exemple, vous devrez créer un accès pour chaque rôle.<br>
Assurez-vous que les rôles guppy, poisson et dauphin ont des accès limités.<br>
Le rôle baleine, lui, peut accéder à tout ce que les autres peuvent faire : c’est l’administrateur. <br><br>
Le <strong>contrôle d'accès</strong> consiste à configurer votre application web pour s'assurer que les utilisateurs ne peuvent accéder qu'aux données permises par leur rôle.<br><br>
L'authentification valide une identité, comme un nom d'utilisateur et un mot de passe.<br>
Une fois authentifié, vous pourrez accéder à certaines pages.<br>
Si les contrôles d’accès ne sont pas verrouillés, vous pourrez accéder à des pages et à des fonctionnalités auxquelles vous n'êtes normalement pas autorisé à accéder, parfois sans le savoir.

<h3>Découvrez les attaques contre le contrôle d'accès</h3>
<h4>Appréhendez la restriction URL</h4>
Les attaques courantes contre le contrôle d'accès se produisent lorsqu'une URL permet de contourner l'authentification.<br>
Les pirates informatiques utilisent la connaissance des formats et des modèles pour deviner l'URL des pages privilégiées qui n'ont pas été configurées de manière sécurisée.<br>
Pour se protéger contre ce type d'attaque, il est possible de mettre en place une restriction URL.<br><br>
Prenons le cas d’une attaque utilisant les rôles que nous avons définis précédemment<br>
Un utilisateur du groupe guppy se connecte, et le lien de la page principale ressemble à ceci :<br>
<div class="code">
  https://webdevfightshacker.bla/guppy_login.html
</div><br><br>
Vous remarquerez qu’il y a une structure définie.<br>
La page de login  <div class="inner_code">guppy_login.html</div>  est définie comme page principale.<br><br>
Un attaquant pourra par exemple être en mesure de deviner la page d’authentification d’un autre rôle en devinant les pages des autres groupes (poisson_login.html, par exemple).<br>
<div class="code">
  https://webdevfightshacker.bla/whale_login.html
</div>
<h4>Comprenez les références directes d'objets non sécurisées (IDOR)</h4>
Un utilisateur malveillant dispose de techniques pour accéder à une grande partie du code d'une application web.<br>
Une partie de ce code peut révéler comment une base de données est organisée.<br>
Le fait de fournir quelques informations sur la structure de l’application web peut permettre à un utilisateur non autorisé d’effectuer des actions malveillantes et de contourner les accès prédéfinis. <br>
Par exemple, si vous accédez à votre compte sur un site et que vous êtes sur la page principale,<br>
 vous remarquez que l'adresse URL ressemble à ceci :<br><br>
 <div class="code">https://webdevfightshacker.bla/index.php/view?account=3453</div><br>
 Ici le numéro <strong>3453</strong> correspond a un nombre dans la base de données.<br>
 Une personne malveillante pourrait ici modifier ce nombre pour accéder à un compte en particulier.<br><br>
<div class="code">https://webdevfightshacker.bla/index.php/view?account=1</div><br><br>
Dans l'exemple ci-dessus, chaque compte est considéré comme un objet.<br>
Lorsque vous faites une référence directe à cet objet dans l'URL en ajoutant account=1, vous donnez à l’attaquant un indice sur la façon dont votre application web et votre base de données sont configurées.<br>
Il pourra ainsi exploiter ces faiblesses pour accéder à certaines parties non autorisées de l'application.

<h4>Découvrez l'attaque null byte (octet nul)</h4>
Une attaque d'octet nul tire parti des références de l'objet.<br>
Les noms de page par défaut peuvent être basés sur la configuration du modèle, de la vue et du contrôleur (MVC) que beaucoup d'applications web utilisent.<br>
Cela permet à un attaquant d'utiliser ces connaissances pour extraire une partie du code source de votre page !<br>
Regardons un site web avec un lien de menu intitulé  <div class="inner_code">About_us.htm</div>.<br>
Ceci montre que toutes les pages se terminent par  <div class="inner_code">.htm</div>  ou similaire.<br>
<div class="code">
  webdevfightshacker.bla/fight/default.aspx?content=about_us.htm
</div><br><br>
L’attaquant sait aussi que le fichier <div class="inner_code">default.aspx.cs</div >est la page principale, et veut y jeter un coup d’œil pour plus d'informations.<br>
<strong>Un octet nul (./)</strong> fait croire au navigateur que l'URL est complète.<br>
La chaîne de caractères qui suit l'octet nul peut donner à l’attaquant l'occasion de montrer le contenu de n'importe quel fichier.<br><br>
<div class="code">
  webdevfightshacker.bla/fight/default.aspx?content=%20./default.aspx.cs%00.htm
</div><br><br>
Cet exemple montre la page <div class="inner_code">default.asps.cs.</div>.<br>
Il sera ici possible d'accéder à n'importe quelle page et donc de contourner les contrôles d'accès mis en place.<br><br>
<div class="remarque">
  Les références directes d'objet peuvent également apparaître dans un code d'erreur.<br>
  L’attaquant peut commencer à manipuler les entrées pour voir quels types d'exceptions et d'erreurs apparaissent et ce qu'elles disent.
</div><br><br>

<h4>Sécurisez les contrôles d’accès</h4>
<ol>
<li>Au lieu de nommer vos pages cibles avec un sens,<br> utilisez un tableau de valeurs clés qui font référence à vos objets.</li>
<li>Modifiez les noms par défaut de vos pages web.</li>
<li>Assurez-vous que toutes les pages ont un contrôle d'authentification.</li>
<li>Personnalisez vos exceptions et vos codes d'erreur.</li>
</ol>

<h3>En résumé</h3>
<ul>
<li>Les applications web avec authentification ne garantissent pas que toutes les pages sont verrouillées par contrôle d’accès.</li>
<li>Les références directes aux objets peuvent amener un attaquant à comprendre les modèles et la configuration des applications web.</li>
<li>N'utilisez pas de noms prévisibles ou de références directes à la base de données dans l'URL.</li>
<li>Prévenez les attaques d'octets nuls en protégeant votre code source.</li>
<li>Utilisez des références d'objet indirectes avec des paramètres et des combinaisons clé-valeur.</li>
<li>Personnalisez vos codes d'erreur pour qu'ils ne révèlent pas les attributs de la base de données.</li>
</ul>



<h5><a href="#sommaire">Sommaire</a></h5>
  
<h2 id="xss">2.6 Stoppez le cross-site scripting (XSS)</h2> 

<h3>Définissez le cross-site scripting</h3>
Les attaques cross-site scripting ou XSS sont faites pour prendre le contrôle de votre navigateur.<br>
Un attaquant qui y parvient aura potentiellement accès à vos cookies et à vos sessions qui peuvent contenir des données sensibles !<br>
Ces attaques peuvent également permettre d’apporter des modifications non autorisées à une application web et créer des liens qui vous mèneront vers des sites malveillants !
<h4>Découvrez les attaques utilisant XSS</h4>
Avec une attaque XSS, un attaquant va essayer de prendre le contrôle de votre navigateur en injectant un script JavaScript dans l'application web.<br>
Il pourra l’injecter directement dans un formulaire, mais il peut également l’injecter dans l'URL, l'en-tête HTTP ou d'autres parties du framework utilisé.<br>
Contrairement aux injections SQL, il ne s'agit pas de requêtes et de commandes SQL sur une base de données.<br>
Une faille XSS s’exécute dans le code de l'application web.<br><br>
Revenons à la page de connexion avec le nom d'utilisateur et le mot de passe.<br> 
Au lieu du nom d'utilisateur, le pirate va entrer :<br>
<div class="inner_code"><<span style="color:rgb(206, 201, 201);">.</span>script> I haxx000red you <<span style="color:rgb(206, 201, 201);">.</span>/script></div>
Sur une page de connexion qui n'est pas sécurisée, il y aura une boîte de dialogue qui s’affichera.<br>
De plus, l'URL qui se trouve maintenant dans votre barre d'adresse peut être utilisée pour exécuter directement ce script.<br>
Il est également possible d'effectuer la même attaque avec une image, par exemple.<br><br>
<div class="code">
  <<span style="color:rgb(0,0, 0);">.</span>img src oneerror= “alert(haaxxxx000red 4ever!)”<span style="color:rgb(0, 0, 0);">.</span>>
</div><br><br>
L'URL dans la barre d'adresse après l'exécution du script pourrait ressembler à ceci :<br>
<div class="inner_code">webdevfightshacker.bla/index.html?query=<<span style="color:rgb(206, 201, 201);">.</span>img src + onerror%3Dalert%45%haaxxxx%87”....></div><br><br>
Notez que le domaine sur l'URL a l'air légitime, mais à la fin de l'URL, on peut voir le script qui a été ajouté.<br>
Ce lien peut exécuter du code arbitraire sur le navigateur.<br>
Un attaquant pourra transmettre cette URL à une cible qui exécutera l'attaque XSS dans son environnement.<br><br>
<div class="remarque">
  Pour en savoir plus sur les attaques XSS, consultez l'aide-mémoire de l'<a href="https://cheatsheetseries.owasp.org/cheatsheets/XSS_Filter_Evasion_Cheat_Sheet.html" target='_blank'>OWASP</a> (en anglais).
</div><br><br>
Les attaques XSS ciblent également les cookies, exposant leur contenu dans une fenêtre pop-up.<br>
Par exemple, si vous avez envoyé une demande de connexion à un serveur web et qu'il répond par un cookie avec vos identifiants en texte clair,<br>
un script XSS s'exécutera sur votre navigateur et affichera une fenêtre pop-up avec vos identifiants qui étaient sur le cookie.<br><br>
<div class="border_red">
Une option consiste à ajouter un flag  <strong>HttpOnly</strong> à vos cookies.<br>
Ce flag permet d’empêcher un script d'accéder aux cookies.<br>
<strong>HttpOnly</strong>  est un flag à mettre à  <div class="inner_code">true</div>  dans la plupart des frameworks.<br>
Par exemple, <strong>Node.js</strong> a un module de cookies avec HttpOnly, et un middleware appelé <strong>Helmet</strong>.
</div><br><br>
<strong></strong>Express PHP a une fonction <div class="inner_code">setcookie()</div>  qui permet de configurer <strong>HttpOnly</strong>  comme paramètre,<br>
   et <strong>ASP.NET</strong> a l'option <div class="inner_code">CookieHTTpOnly</div> et <div class="inner_code">CookieSecure</div><br><br>
<div class="important">
Attention cependant, l’option <strong>HttpOnly</strong> peut ne pas fonctionner sur les navigateurs obsolètes.<br>
Les attaques XSS sont passées de la troisième à la septième place du Top Ten de l'OWASP parce que les navigateurs ont renforcé leur sécurité, rendant ces attaques plus difficiles.
</div>

<h4>Respectez les bonnes pratiques</h4>
<ul>
<li><strong>Appliquez la validation des données d'entrée</strong> :<br>
   pour empêcher les attaques communes, il est possible de blacklister certains caractères comme les balises script.</li>
<li><strong>Appliquez la transformation des entrées</strong> :<br>
   vous pouvez encoder toutes vos entrées dans une entité de caractères HTML ou du texte pour qu'il n'exécute aucun script.<br>
    Il existe des fonctions simples et des bibliothèques qui peuvent vous aider à encoder tout votre HTML et JavaScript.</li>
<li>Configurez vos cookies avec le flag <strong>HttpOnly</strong></li>
</ul>

<h3>Découvrez les vulnérabilités CSRF (Cross-Site Request Forgery) </h3>
Un pirate peut créer un lien XSS et le distribuer par le biais de l'ingénierie sociale pour accéder au navigateur d'un utilisateur.<br>
L’ingénierie sociale est un type d’attaque ne reposant pas sur une faille technique.<br>
Si l'utilisateur clique sur le lien alors qu'une session est encore ouverte sur sa banque,<br>
le pirate peut détourner un jeton de session dans le navigateur (en temps réel) pour accéder à cette session.<br><br>
Ces requêtes peuvent également rester inactives jusqu'à ce que l'utilisateur ait créé une session sur son navigateur.<br>
Regardons l’exemple ci-dessous :<br>
<div class="code">GET http://bank.com/transfer.do?acct=BOB&amount=100 HTTP/1.1</div><br><br>
Dans notre exemple, ce lien XSS est un formulaire de demande GET, mais il pourrait aussi bien s'agir d'un formulaire de demande POST.<br>
Ce lien effectue une transaction bancaire.<br>
Cette transaction bancaire se produit à l'insu de l'utilisateur qui peut ou non réaliser que le navigateur a toujours la session bancaire ouverte.<br><br>
<h4>Protégez votre application contre une faille CSRF</h4>
<ol>
<li>Exiger la réauthentification pour toutes les demandes des utilisateurs.</li>
<li>Utiliser un jeton unique pour chaque demande.</li>
<li>Utiliser des jetons anti-falsification qui valident le jeton côté client par rapport au jeton côté serveur web.</li>
<li>Effectuer des recherches sur les bibliothèques CSRF basées sur la sécurité.</li>
</ol>

<h3>En résumé</h3>
<ul>
  <li>Une faille cross-site scripting ou XSS est un script qui peut être exécuté dans votre site web.</li>
  <li>Empêcher une faille XSS avec validation de l'entrée et un encodage de l'entrée.</li>
  <li>Protégez vos cookies en activant l'option HttpOnly.</li>
  <li>Les attaques CSRF peuvent se produire via social engineering.</li>
  <li>Les attaques CSRF effectuent des transactions à l'insu de l'utilisateur.</li>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>
  
<h2 id="xxe">2.7 Protégez votre code contre les failles XXE et la désérialisation non sécurisée</h2>
  <h3>Découvrez les XML External Entities (XXE)</h3>
    Pour comprendre ce que sont les XXE, il faut d’abord définir le langage XML.<br>
    Le langage XML (Extensible Markup Language) a été créé pour stocker, partager et transporter des données entre systèmes.<br>
    Il est indépendant de la plateforme et du langage. <br>
    XML est utilisé pour transmettre des données d'une plateforme à l'autre.<br>
    Beaucoup d'applications web utilisent XML pour gérer les données.<br>
    Il ressemble à HTML, mais fonctionne différemment car HTML est utilisé pour présenter les données en hypertexte sur un navigateur.<br>
    Revenons au formulaire de connexion d'un utilisateur.<br>
    Ici, vous vous inscrivez sur un site avec votre nom, votre adresse e-mail et votre numéro de téléphone.<br>
    Une fois que vous avez appuyé sur Entrée, les informations que vous avez tapées deviennent des éléments sous forme XML.<br><br>
    <div class="code">
      <<span style="color:rgb(0, 0, 0);">.</span>?xml version="1.0" encoding="ISO-8859-1"?><br>

      <<span style="color:rgb(0, 0, 0);">.</span>users><br>
        <br>
        <span style="color:rgb(0, 0, 0);">.</span><<span style="color:rgb(0, 0, 0);">.</span>user><br>

      <<span style="color:rgb(0, 0, 0);">.</span>username>Batman<<span style="color:rgb(0, 0, 0);">.</span>/username><br>

      <<span style="color:rgb(0, 0, 0);">.</span>email>batman@superheroes.bla<<span style="color:rgb(0, 0, 0);">.</span>/email><br>

      <<span style="color:rgb(0, 0, 0);">.</span>phone>888-123-4567<<span style="color:rgb(0, 0, 0);">.</span>/phone><br>

      <<span style="color:rgb(0, 0, 0);">.</span>/user><br>
      <br>
      <<span style="color:rgb(0, 0, 0);">.</span>/users><br>
    </div><br><br>
    En XML, il existe des entités internes et externes.<br>
    <strong>Une entité interne</strong> est essentiellement une référence XML à un objet interne.<br>
    Le code ci-dessous représente une entité interne<br>
    <div class="code">
      <<span style="color:rgb(0, 0, 0);">.</span>!ENTITY superhero "Batman"><br>
      <br>
      <<span style="color:rgb(0, 0, 0);">.</span>!ENTITY origin "Gotham City"><br>
      <br>
      <<span style="color:rgb(0, 0, 0);">.</span>character>&superhero;&origin;<<span style="color:rgb(0, 0, 0);">.</span>/character>
    </div><br><br>
    <strong>Une entité externe</strong> est une référence XML à une source externe comme un chemin de fichier ou une URL, des images, des références de documents ou des liens de fichiers.<br>
    Lorsque cette balise d'entité externe est intégrée à une page web, elle sera directement affichée depuis son emplacement externe.<br>
    Dans l’exemple ci-dessous, la première entité externe, le super-héros, est une URL référencée.<br>
    La deuxième entité externe, l'origine, fait référence à un chemin de fichier sur un système de fichiers Linux.<br>
    Le contenu du fichier sur ce chemin sera affiché sur la page web.<br>
    Le mot clé SYSTEM inclut le fichier référencé dans le document XML.<br><br>
    <div class="code">
      <<span style="color:rgb(0, 0, 0);">.</span>!ENTITY superhero SYSTEM "http://www.batman.bla"><br>

    <<span style="color:rgb(0, 0, 0);">.</span>!ENTITY origin SYSTEM "file:///usr/batman"><br>

    <<span style="color:rgb(0, 0, 0);">.</span>character>&superhero;&origin;<<span style="color:rgb(0, 0, 0);">.</span>/character>

    </div>

    <h3>Découvrez le fonctionnement d'une attaque XXE</h3>
    Une attaque XXE ou injection XXE est un type d'attaque contre une application qui utilise XML.<br>
    Cette attaque se produit lorsque l'entrée XML contenant une référence à une entité externe est traitée par un analyseur XML mal configuré.<br>
    Cette attaque peut entraîner la divulgation de données confidentielles, un déni de service, une falsification de requête côté serveur et d'autres impacts sur le système.<br><br>
    <div class="question"><img src="media/question-circle-regular.svg">Comment un pirate peut-il tirer profit d'une XXE ?</div><br>
    Regardons la ligne du code ci-dessous.<br>
    <div class="code">
      <<span style="color:rgb(0, 0, 0);">.</span>!ENTITY origin SYSTEM "file:///usr/batman">
    </div><br><br>
    Lorsque cette entité est référencée, elle affichera le contenu du fichier  <div class="inner_code">/usr/batman</div>.<br>
    Un attaquant peut avoir délibérément choisi de placer ce chemin d'accès dans le XML pour obtenir <strong>un accès non autorisé</strong> au contenu de ce fichier.<br>
    Cette attaque est une forme d’injection.<br><br>
    <div class="question"><img src="media/question-circle-regular.svg">Comment fonctionne l'attaque par injection XML ? </div><br>
    Pour une page de connexion normale, un développeur web créera une requête AJAX POST vers une page de connexion qui utilisera un nom XML et un mot de passe comme identifiants.<br>
    Une requête POST est créée pour aller à l'URL  <div class="inner_code">webdevfightshacker.bla/login.html</div><br>    
    Une fois sur la page de connexion, les données XML présentes dans la variable <strong>xmlHero</strong> rempliront le formulaire Nom et mot de passe.<br>    
    La demande POST fournit une réponse pour indiquer le succès ou l'échec.<br>
    <div class="code">
      var xmlHero = "<br>

      <<span style="color:rgb(0, 0, 0);">.</span>hero><br>

      <<span style="color:rgb(0, 0, 0);">.</span>name>Batgirl<<span style="color:rgb(0, 0, 0);">.</span>/name><br>

      <<span style="color:rgb(0, 0, 0);">.</span>password>ilovebatman<<span style="color:rgb(0, 0, 0);">.</span>/password><br>

      <<span style="color:rgb(0, 0, 0);">.</span>/hero>”;<br>

      $.ajax<br>

      ({<br>

      type: "POST",<br>

      url: "webdevfightshacker.bla/login.html",<br>

      data: xmlHero,<br>

      success: function(response)<br>

      { console.log(response);<br>

      }<br>

      });
    </div><br><br>
    Le code ci-dessus montre une requête POST qui envoie les données XML assignées à la variable <div class="inner_code">xmlHero</div>.<br>
    La page de connexion qui reçoit cette requête POST utilise ensuite une fonction d'analyse XML pour lire le contenu et l'affecter aux variables qui correspondent au nom d'utilisateur et au mot de passe du formulaire.<br>
    Une injection XXE est utilisée pour lire le contenu d'un fichier et l'afficher sur le navigateur.<br>
    Imaginons que le pirate soit intéressé par un dossier spécial appelé <div class="inner_code">secretpower</div> dans le répertoire de <div class="inner_code">Batgirl</div>.<br>
    Le pirate commence à créer une description de type de document pour une entité nommée <div class="inner_code">hax</div> et lui donne le chemin du fichier.<br>
<div class="code">
  <<span style="color:rgb(0, 0, 0);">.</span>!DOCTYPE hax [<<span style="color:rgb(0, 0, 0);">.</span>!ELEMENT hax ANY ><br>
<<span style="color:rgb(0, 0, 0);">.</span>!ENTITY hax SYSTEM “C:\Users\SBatgirl\Desktop\secretpower”>
</div><br><br>
Ensuite, la variable  <div class="inner_code">hax</div>  est référencée comme une entité de caractère externe XML.<br>
<div class="code">
  var xmlHero = "<br>
<<span style="color:rgb(0, 0, 0);">.</span>hero><br>
    <<span style="color:rgb(0, 0, 0);">.</span>name>&hax;<<span style="color:rgb(0, 0, 0);">.</span>/name><br>
    <<span style="color:rgb(0, 0, 0);">.</span>password>ilovebatman<<span style="color:rgb(0, 0, 0);">.</span>/password><br>
<<span style="color:rgb(0, 0, 0);">.</span>/hero>”;

</div><br><br>
Dans ce cas, l’attaquant sera en mesure de récupérer le mot de passe de Batgirl et d’accéder à ses données.

<h3>Protégez votre code contre les injections XXE</h3>
Il existe un moyen de désactiver les entités externes dans tous les langages.<br>
Il s'agit généralement d'une balise binaire vrai/faux.<br><br>
Par exemple, dans un analyseur XML PHP, le code ressemblerait à ceci :<br>
<div class="inner_code">libxml_disable_entity_loader (true) ;</div> <br><br>
Et en Java :<br>
<div class="code">
  factory.setFeature("http://apache.org/xml/features/disallow-doctype-decl", true);
</div><br><br>
<div class="remarque">
  Il existe d'autres API d'analyse XML qui peuvent avoir des entités externes activées par défaut.<br>
  Pour obtenir la liste de ces API, vous pouvez consultez cette page :<br>
  <a href="https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.md" target='_blank'>XML External Entity Prevention Cheat Sheet</a>.
</div>
<h3>Découvrez la désérialisation non sécurisée</h3>
La désérialisation non sécurisée est une vulnérabilité qui se produit lorsque des données non fiables sont utilisées pour abuser de la logique d'une application,<br>
causer un déni de service (DoS, Deny of Service),<br>
ou même exécuter du code arbitraire.<br>
Cette vulnérabilité occupe la 8e place du classement OWASP.<br><br>
Pour comprendre la désérialisation non sécurisée, il faut d’abord comprendre ce qu’est la sérialisation.<br>
Pour cet exemple, nous allons prendre un objet, comme un nom d'utilisateur et un mot de passe, et le mettre dans la base de données.<br>
Pour pouvoir être stocké, l'objet devra être converti en flux d'octets pour être transporté à travers le réseau afin d'accéder à la base de données.<br><br>
C'est ce qu'on appelle la <strong>sérialisation</strong>.<br><br>
Lorsqu'il y a un appel pour ce même objet dans la base de données, il doit être désérialisé (conversion du flux d'octets en objet) avant son utilisation.<br>
Ce processus de sérialisation/désérialisation des objets ne se produit pas seulement avec les bases de données.<br>
Un objet peut changer son état en un flux d'octets lorsqu'il est stocké dans un fichier, d'ordinateur à ordinateur ou en se déplaçant sur le réseau.<br>
Ces objets peuvent être des cookies, des flux vocaux, des jetons ou des fichiers cache, par exemple.<br>
La désérialisation non sécurisée est une vulnérabilité qui expose les données à une attaque MITM  (homme du milieu), que nous avons vue précédemment,<br>
ou à une injection de code qui peut changer l'intégrité de l'objet quand il est désérialisé.<br><br>
<div class="remarque">
  Java dispose de bibliothèques dédiées à la sérialisation et à la désérialisation.<br>
YAML dispose de bibliothèques dédiées à la sérialisation pour différents langages de programmation.
</div><br><br>
Par exemple, un cookie avec un identifiant de session et des informations d'identification est envoyé par le navigateur au serveur web exécutant Java.<br>
Ce cookie est sérialisé en utilisant la classe Java OutputStream avec un constructeur.<br>
À partir de là, le code malveillant peut être  injecté par un attaquant au moment de la sérialisation.<br>
Le cookie est désérialisé à l’aide de la classe <strong>ObjectInputStream</strong> de Java, sans constructeur.<br>
Le constructeur est créé après la création de l'objet.<br>
Sans vérification ni validation des entrées pendant le processus de désérialisation.<br>
Un attaquant peut utiliser une classe Java Serializable ou Externalizable car elles sont déjà disponibles dans la bibliothèque.<br>
Les valeurs peuvent être manipulées pour créer des fonctionnalités différentes de celles de l'objet d'origine.<br><br>
Voici un exemple avec Java :<br>
<div class="code">
  public class Hacked extends Serializable {<br>
    private String cmd;<br>
    private void readObject(ObjectInputStream hackedbinary) {<br>
        hackedbinary.defaultReadObject();<br>
        Runtime.getRuntime().exec(cmd);<br>
    }<br>
}
</div><br><br>
Cette classe <div class="inner_code">Hacked</div> crée une bibliothèque utilisée dans le système.<br>
La valeur de la variable de classe est appelée cmd (qui correspond à l’invite de commande).<br>
Les méthodes  <div class="inner_code">readObject() defaultReadObject()</div>  désérialisent le binaire pour coïncider avec le processus de sérialisation au début.<br>
Le fichier  <div class="inner_code">Runtime.getRuntime().exec(cmd)</div>  ouvre une invite de commande permettant à l’attaquant de modifier efficacement la fonctionnalité de l'objet original.<br>
<h4>Prévenez la désérialisation non sécurisée</h4>
Dans l'exemple ci-dessus, la classe Java <div class="inner_code">ObjectInputStream</div> restreint l'utilisation arbitraire de cette bibliothèque en l'enveloppant dans la bibliothèque SerialKiller.<br>
La bibliothèque <a href="https://github.com/ikkisoft/SerialKiller" target='_blank'>Java SerialKiller</a> a été créée pour pallier les problèmes de désérialisation.<br>
Pour empêcher l'accès privilégié non autorisé à l'aide de l'objet désérialisé, une mesure défensive consisterait à valider les données d'entrée et à vérifier la fonctionnalité de l'objet.

<h3>En résumé</h3>
<ul>
  <li><strong>Des entités XML externes</strong><br>
    peuvent être utilisées pour révéler des données sensibles, des images et des références de documents enregistrées sur un ordinateur.
  </li>
  <li><strong>Les entités XML externes</strong><br>
    devraient être désactivées.
  </li>
  <li><strong>La désérialisation non sécurisée</strong><br>
    est la capacité d'un attaquant à changer l'état du code pendant sa conversion en binaire.
  </li>
  <li><strong>La désérialisation non sécurisée</strong><br>
    peut être évitée en créant des contrôles sur l'état du code.
  </li>
</ul>


    <h5><a href="#sommaire">Sommaire</a></h5>
  
    <h2 id="environnement">2.8 Sécurisez votre environnement de développement</h2> 
  <h3>Faites face aux vulnérabilités connues</h3>
  Il est important de faire des recherches sur les outils de votre environnement de développement pour être au courant de toutes les vulnérabilités et des méthodes d'atténuation.<br>
  Documentez tous les modules, API et bibliothèques utilisés, ainsi que les vulnérabilités connues afin de garder une trace des actions effectuées.<br><br>
  <div class="question"><img src="media/question-circle-regular.svg">Comment savoir si un des outils que j'utilise présente une vulnérabilité connue ?</div><br><br>
  Pensez à consulter les bases de données sur le web.<br>
  La base de données <a href="https://cve.mitre.org/" target='_blank'>Common Vulnerabilities and Exposures</a> (en anglais), créée par le MITRE, est un excellent outil à utiliser.<br> 
  Le MITRE est une organisation à but non lucratif qui effectue des travaux liés à la cybersécurité.<br><br>

Voici quelques conseils pour vous assurer que votre environnement est sécurisé :
<ul>
  <li>documentez les versions de chaque composant de votre application, y compris le firmware de la carte réseau du serveur ;</li>
  <li>examinez vos composants physiques, vos applications, votre système d'exploitation, vos API, vos bibliothèques et les versions des langages utilisées.</li>
</ul>

<h3>Identifiez votre environnement pour éviter les failles de sécurité</h3>
Vous pouvez appliquer toutes les pratiques de programmation sécurisée que vous connaissez,<br>
 mais si vous vous retrouvez avec votre application web dans un environnement qui n'est pas sécurisé,<br>
  cela peut l'ouvrir à d'autres attaques.<br><br>
Il est très important d'avoir une bonne configuration de sécurité pour l'environnement qui héberge votre application web afin d'assurer sa disponibilité et son intégrité.<br>
Par ailleurs, il faudra également mettre en place des couches de sécurité telles qu'un pare-feu (WAF).<br>
Ce pare-feu devra être configuré de manière optimale pour s'assurer que seuls les ports requis sont ouverts afin de renforcer la sécurité.<br>
Un outil comme un SIEM (Security information management system) peut détecter les événements et assurer la gestion de la sécurité du serveur.<br> 
En dehors du serveur d'application web et du pare-feu, se trouve le serveur physique lui-même.<br>
En règle générale, les services cloud qui fournissent cet espace ont déjà mis en place des mesures de sécurité.<br>
Assurez-vous que les normes de conformité pour le service cloud utilisées sont conformes aux exigences de la politique de sécurité de votre application web.<br>
La configuration de sécurité du serveur physique et du pare-feu pour la plateforme de cloud nécessitent une configuration stricte.<br><br>
Le contrôle d'accès pour les composants externes de l'environnement, tels que la plateforme et l'administration du serveur, sont d'autres moyens par lesquels un attaquant peut obtenir un contrôle non autorisé à une application web.<br>
Ces. facteurs doivent être correctement configurés et documentés.

<h3>Sécurisez votre environnement</h3>
Après avoir pris connaissance des composants de votre environnement, vous devez vous assurer que les configurations sont à la hauteur de la sécurité requise.<br>
La bonne gestion des vulnérabilités est un élément critique pour maintenir la sécurité de votre application web.<br><br>
Prenons un exemple concret.<br><br>
Supposons que la plateforme sur laquelle est hébergée votre application web dispose d'une console d'administration.<br>
Votre patron insiste sur le fait que la plateforme a la réputation d'être sécurisée et qu'elle utilise un service cloud populaire !<br>
Il vous dit aussi que tout est configuré et qu'il vous suffit de paramétrer votre application web sur la plateforme.<br>
Tout est sécurisé !<br><br>
Le site est détourné, et devinez quoi ?<br>
Les pirates avaient un accès complet à votre application web parce qu'ils pouvaient accéder à la console d'administration.<br>
Apparemment, certaines des informations d'identification par défaut n'ont pas été supprimées,<br>
et comme ces informations d'identification sont déjà connues des attaquants,<br>
ils attendent que la même application web apparaisse avec les paramètres par défaut !<br><br>
La sécurisation de votre code avec l’OWASP n’a pas d’intérêt si un attaquant a accès au code source et peut se connecter directement dans la console d'administration.<br>
Quelle est la leçon à tirer ici ?<br>
Sécurisez toutes vos applications externes !<br>
Une mauvaise configuration de sécurité peut se produire à n'importe quel niveau,<br>
y compris les services réseau, la plateforme, le serveur web, le serveur d'applications, la base de données, les frameworks, le code personnalisé et les machines virtuelles, conteneurs ou stockage préinstallés.<br><br>
<div class="remarque">
  Vous pouvez en apprendre davantage avec sur cette page du site de l'<a href="https://owasp.org/www-project-top-ten/2017/A6_2017-Security_Misconfiguration.html" target='_blank'>OWASP</a> (en anglais).
</div><br><br>
Pour <strong>les services réseau</strong>, vous allez examiner l'infrastructure de votre serveur web et vous assurer que les meilleures pratiques sont utilisées pour sécuriser vos services.<br>
Vous avez des serveurs FTP de base de données ou LDAP (Lightweight Directory Access Protocol) qui peuvent être compromis par les mauvaises personnes !<br>
Les systèmes d'authentification doivent suivre les meilleures pratiques de sécurité.<br><br>
Voici quelques bonnes questions à poser :
<ul>
  <li>Existe-t-il des pare-feux pour toutes les applications et tous les serveurs ? </li>
  <li>Est-ce que seuls les ports nécessaires sont ouverts avec des ensembles de règles limités ?</li>
  <li>Les pare-feux limitent-ils le type de trafic sur les ports ouverts ?</li>
  <li>De plus, y a-t-il un processus mis en place pour détecter les anomalies dans le trafic web ?</li>
</ul>
<strong>Le trafic web</strong> devrait également être surveillé pour déceler les anomalies.<br>
Imaginez si quelqu'un commençait à effectuer des scans de ports pour rechercher périodiquement les ports ouverts.<br>
Il y a des outils qui peuvent détecter de tels événements pour avertir les administrateurs qu'il y a une tentative possible de piratage du site.<br><br>
Concernant <strong>l'application et la plateforme</strong>, nous avons parlé du nom d'utilisateur et des mots de passe par défaut pour les serveurs, les applications et les bases de données.<br>
Nous avons également passé en revue la détection et l'enregistrement des événements possibles.<br>
Assurez-vous qu'ils ne révèlent pas les informations de base sur votre site, telles que les noms d'utilisateur, les fichiers, les configurations IP et les données de base pour l'entreprise et les personnes.<br><br>
Tous <strong>les aspects administratifs</strong> tels que les répertoires et les fichiers de configuration pour toutes les applications doivent être protégés des regards indiscrets.<br>
Protégez le code source et la structure des fichiers en vous assurant que le serveur web est verrouillé.<br><br>
Toutes vos applications sont hébergées sur des systèmes d'exploitation.<br>
Assurez-vous que les applications ont un accès <strong>minimal</strong> au système d'exploitation, car le piratage du système d'exploitation est un moyen sûr de prendre le contrôle de votre application.<br><br>
Vous disposez également de <strong>jetons d'accès</strong>, de <strong>mots de passe d'authentification</strong> et de <strong>clés de chiffrement</strong> !<br>
 Protégez-les également.<br><br>
Enfin, <strong>les exceptions</strong> et <strong>les codes d'erreur</strong> en disent long sur votre application, votre code source, le fonctionnement du réseau, la structure des fichiers de votre base de données, les répertoires de fichiers et plus encore.<br>
Les attaquants cherchent ce type d'information.<br>
Une stack trace peut être utile lorsque vous déboguez votre application ; cependant, si elle est utilisée à des fins malveillantes, la quantité d'informations qu'elle peut révéler peut être dangereuse !<br><br>
<div class="remarque">
  Une stack trace est la représentation des piles d'exécution à un moment donné lors de l'exécution d'un programme informatique.
</div>
<h3 id='env'>Fichier d'environnement</h3>
Afin de securiser les données lors du deploiement , il est necessaire de créer <strong>un fichier contenant les données sensible qui ne sera pas deployer sur une plateforme publique</strong>.<br>
Pour connecter à notre base de donnée MongoDB nous avons besoins du URL de connection.<br>
MongoDB va nous fournir ce URL.<br>
Le truc c'est que pour des raisons de sécurité évidente, nous ne pouvons pas utiliser cet URL de connection directement dans notre code.<br>
L' URL de connection doit être placé dans un fichier qui sera hors d'atteinte des utilisateurs lors du déploiement.<br>
Pour ce faire nous allons donc créer un fichier qui contiendra notre URL de connection.<br>
Par convention ce fichier de nomme <strong><u>.env</u></strong> (dot env)<br><br>
Installer la dependance NPM:<br>
<strong><u>npm install dotenv</u></strong><br><br>
Il faudra ensuite declare <div class="inner_code">dotenv</div> dans les fichiers qui contiennent des mots de passe<br>
Ajouter la dependance<br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// auth.js</span><br>
  require('dotenv').config()
</div><br><br>


<h3>MongoDB</h3>
Créer le fichier <strong><u>.env</u></strong> à la racine du Backend et inclure l' URL de connection MongoDB<br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// .env </span><br>
  MONGO_URI = 'mongodb+srv://< username >:< password >@nodeexpress.my1j7.mongodb.net/myFirstDatabase?retryWrites=true&w=majority'
</div><br>
<strong>MONGO_URI</strong> deviendra la variable a exporter dans le fichier <strong><u>app.js</u></strong><br><br>
Ajouter la dependance dans le fichier <strong><u>app.js</u></strong> avant <strong><u>mongoose.connect</u></strong><br>
<div class="code">
  require('dotenv').config()
</div><br><br>
Modifier la connexion mongoose dans le fichier <strong><u>app.js</u></strong>:<br>
<div class="code">
  mongoose.connect('mongodb+srv://jimbob:@cluster0-pme76.mongodb.net/test?retryWrites=true&w=majority')
</div> <br>
devient<br>
<div class="code">
  mongoose.connect(process.env.MONGO_URI)
</div>

<h3>JsonWebToken</h3>
Ajouter dans le fichier <strong><u>.env</u></strong> la chaine de caractère choisi pour  <strong>JsonWebToken</strong><br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// .env </span><br>
  TOKEN = 'RANDOM_TOKEN_SECRET'
</div><br><br>
Dans le fichier <strong><u>auth.js</u></strong> remplacer la valeur du token par la variable<strong>TOKEN</strong><br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// auth.js (origin)</span><br>
  const decodedToken = jwt.verify(token, 'RANDOM_TOKEN_SECRET');
</div><br><br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// auth.js (Modifié)</span><br>
  const decodedToken = jwt.verify(token, TOKEN);
</div><br><br>
Ajouter la dependance<br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// auth.js</span><br>
  require('dotenv').config()
</div><br><br>
Dans le fichier <strong><u>userCtrl.js</u></strong> remplacer la valeur du token par la variable<strong>TOKEN</strong><br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// userCtrl.js (origin)</span><br>
  token: jwt.sign({ userId: user._id },'RANDOM_TOKEN_SECRET',{ expiresIn: '24h' })
</div><br><br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// userCtrl.js (Modifié)</span><br>
  token: jwt.sign({ userId: user._id },TOKEN,{ expiresIn: '24h' })
</div><br><br>
Ajouter la dependance<br>
<div class="code">
  <span style="color:rgb(140, 140, 140);">// userCtrl.js</span><br>
  require('dotenv').config()
</div><br><br>
Le fichier <strong><u>.env</u></strong> devrait contenir ces données<br>
<div class="code">
  MONGO_URI = 'mongodb+srv://< username >:< password >@nodeexpress.my1j7.mongodb.net/myFirstDatabase?retryWrites=true&w=majority'<br>
  TOKEN = 'RANDOM_TOKEN_SECRET'
</div><br><br>
Ce fichier ne sera pas mis en ligne publiquement<br><br>
Créer un fichier <strong><u>.env.dist</u></strong> qui sera deployé à la place et qui contient les variables sans leur valeur ,<br>
l'utilisateur renseigne ses propre variable.<br>
<div class="code">
  MONGO_URI = 'mongodb+srv://< Votre identifiant Mongodb>:< Votre mot de passe Mongodb>@cluster0.kuvdm.mongodb.net/P6Piiquante?retryWrites=true&w=majority';<br>
  TOKEN = '< votre chaîne secrète>'<br><br>
  MONGO_URI = Veuillez renseigner votre identifiant et mot de passe MongoDB<br>
  TOKEN = Veuillez renseigner votre chaîne secrète<br>
  Retirer l'extension ".dist"<br>
</div><br>


<ul><strong>Utilisation du fichier .env</strong>
<li><strong><a href="https://nodejs.dev/learn/how-to-read-environment-variables-from-nodejs" target="_blank">How to read environment variables from Node.js</a></strong></li>
<li><strong><a href="https://dev.to/ericlecodeur/nodejs-express-partie-6-base-de-donnees-mongodb-3n2m">Créer le fichier .env pour MongoDB</a></strong></li>
</ul>


<h3>En résumé</h3>
<ul>
  <li>Lors de la conception d'une application web, évaluez les composants présentant des vulnérabilités connues.</li>
  <li>Les composants peuvent présenter de nouvelles vulnérabilités tout au long du cycle de vie du produit.</li>
  <li>Patchez toujours les zones présentant de nouvelles vulnérabilités.</li>
  <li>Votre travail n'est pas terminé après que vous ayez écrit un code sécurisé.</li>
  <li>Assurez-vous que les pare-feux et les plateformes sont protégés et configurés de manière à respecter les bonnes pratiques de sécurité.</li>
  <li>Connectez-vous avec les administrateurs de bases de données pour vous assurer que la base de données est sécurisée.</li>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>
  
<h2 id="security">3.1 Testez la sécurité de votre application</h2>

<h3>Réalisez des tests</h3>
Ces tests font partie du <strong>processus de développement d’une application web</strong> ;<br>
cependant, il est nécessaire de les réaliser tout au long du cycle de vie de l’application pour s’assurer que la sécurité est toujours maintenue.<br><br>
Une partie des tests consiste à effectuer des scans de vulnérabilité.<br>
Ces scans utilisent des attaques typiques basées sur les dix principaux risques de sécurité de l'OWASP et les vulnérabilités connues des composants du framework utilisé.<br>
Ils permettront d’identifier rapidement une vulnérabilité commune ou une mauvaise configuration. <br><br>
Une fois que l’application respecte les bonnes pratiques de sécurité de base de l’OWASP,<br>
il sera possible d’apporter des mesures de sécurité supplémentaires pour être conforme aux normes telles que PCI DSS par exemple.<br>
Les tests de sécurité doivent fournir à l'entreprise une bonne idée du niveau de sécurité de son application web.<br><br>
Toutefois, cela ne signifie pas qu'une application web est conforme et prête à être utiliser.<br>
Une entreprise ne peut pas utiliser ses propres services pour prouver qu'elle est accréditée, parce qu'il serait difficile de rester impartial par rapport à des lignes directrices strictes.<br>
Un prestataire tiers est tenu de certifier la conformité d'une application web.<br><br>
Les prestataires tiers spécialisés dans la conformité de la sécurité des applications web utilisent des techniques d'analyse des vulnérabilités et de tests d’intrusion pour vérifier la sécurité de l'application web.<br>
Dans le cas de l'OWASP, la sécurité de l'application web et de ses composants sera testée.<br><br>
Vous devriez vérifier régulièrement la conformité à l'OWASP.<br>
Ensuite, retestez à mesure que de nouvelles vulnérabilités et de nouveaux correctifs apparaissent.<br>
Toute nouvelle vulnérabilité devra être atténuée pour satisfaire les normes en vigueur.<br>
Les entreprises sont responsables de l'acquisition et du maintien de la conformité en fonction de leurs exigences en matière de sécurité.

<h3>Découvrez différentes techniques de tests</h3>
Savoir qu'il faut tester, c'est bien.<br>
Mais quelles sont les techniques de tests ?
<h4>Le fuzzing</h4>
Le fuzzing est une technique utilisée pour tester les zones où les données sont entrées sur votre application web.<br>
Il teste les entrées aléatoirement pour s'assurer que les techniques de validation appropriées sont utilisées.<br>
Le fuzzing va permettre de tester l'injection SQL et les attaques XSS, par exemple !
<h4>L’audit de code</h4>
L'audit de code peut être effectué manuellement ou à l'aide d'un outil automatisé.<br>
Il implique souvent une analyse ligne par ligne du code source pour trouver les éléments ou fonctions vulnérables.<br>
Ce test garantit que les fonctions vulnérables communes ne sont pas utilisées dans le code.<br>
Cela peut permettre de détecter des injections SQL, par exemple.<br>
Bien que votre code puisse réussir un test d'analyse de code,<br>
il peut toujours être vulnérable au contrôle d'accès, au piratage de session, aux problèmes de configuration dans le framework et aux algorithmes cryptographiques faibles.
<h4>Découvrez les modèles de menace (Threat Modeling)</h4>
Un modèle de menace est un processus par lequel des menaces potentielles,<br>
telles que les vulnérabilités structurelles (c'est-à-dire inhérentes à la structure de votre application) peuvent être identifiées, énumérées et classées par ordre de priorité.
Lorsqu'une entreprise établit un modèle de menace, elle tient compte des différents adversaires qui tenteront de compromettre le système.<br>
En fonction du profil des adversaires, vous pouvez établir un modèle de menace afin de déterminer quelles parties doivent être verrouillées pour atténuer votre risque. <br><br>
Voici quelques questions que vous pouvez poser pour créer votre modèle de menace :
<ul>
  <li>Quelles sont les données que vous devez protéger ?</li>
  <li>Qui exploitera les données ?</li>
  <li>Quelle est la probabilité qu'une vulnérabilité soit exploitée ?</li>
  <li>Quels dommages cette exploitation peut-elle causer ?</li>
  <li>Quelle est votre protection contre cet exploit ?</li>
</ul>
  
<h3>Corrigez les vulnérabilités zero day</h3>
Vous ne pouvez jamais être entièrement sûr que votre application web ne sera pas attaquée via l’exploitation d’une vulnérabilité qui n’a pas de correctif.<br>
C'est ce qu'on appelle les <strong>vulnérabilités zero day</strong>. <br><br>
Lorsque des vulnérabilités zero day sont découvertes, les éditeurs de logiciels développent un correctif pour corriger la vulnérabilité.<br>
Cependant, dans de nombreux cas, le correctif est appliqué après avoir fait beaucoup de dégâts.<br>
C'est pour cette raison qu'il est important de maintenir la sécurité de votre application et de la défendre contre les vulnérabilités en la patchant régulièrement.<br>
Ces différents éléments peuvent vous permettre de réduire le risque de compromission et d’améliorer la sécurité de votre application tout au long de son cycle de vie.

<h3>En résumé</h3>
  <ul>
    <li>L'entreprise ne peut pas simplement s'accréditer comme étant conforme aux réglementations telles qu'OWASP ou PCI-DSS.</li>
    <li>Elle aura besoin d'un prestataire tiers spécialisé dans l'examen de la conformité.</li>
    <li>Les règlements peuvent être très stricts pour les grandes entreprises,<br>
      de sorte qu'il faut parfois des mois d'essais pour obtenir la certification.</li>
    <li>L'analyse de vulnérabilité et les tests d’intrusion sont parfaits pour tester les attaques sur une application web.</li>
    <li>L’audit de code source permet d’identifier les fonctionnalités vulnérables. </li>
    <li>Le threat modeling peut vous permettre d'identifier les potentiels attaquants et d’ajuster vos défenses. </li>
    <li>Les vulnérabilités zero day représentent un risque majeur pour vos applications. </li>
  </ul>


  <h5><a href="#sommaire">Sommaire</a></h5>
  
  <h2 id="life_cycle">3.2 Appliquez le cycle de vie du développement logiciel sécurisé</h2>
  
<h3>Découvrez si le cycle de vie du développement logiciel (SDLC) est adéquat</h3>
Le cycle de vie du développement logiciel commence généralement par les phases de collecte des exigences, de conception, de mise en œuvre, d’essais et de diffusion (évolution).<br>
Ce cycle de base ne tient pas compte des vulnérabilités.<br>
Les pratiques de codage sécurisé que nous avons apprises dans ce cours ne font étonnamment pas partie du cycle de vie moyen de développement d'un logiciel.<br>
La sécurité n'est en effet pas une priorité dans la plupart des cycles de développement logiciel.<br>
Il n'est donc pas surprenant que 80 % des applications web en production aujourd'hui soient vulnérables aux attaques courantes !<br><br>

<h4>Découvrez comment est gérée la sécurité dans un cycle de vie logiciel traditionnel</h4>
Dans un cycle de vie classique, la sécurité n'est pas prise en compte dès le début de l'élaboration de l'application.<br>
Alors que se passe-t-il lorsque des vulnérabilités apparaissent lors des tests ?<br>
Les problèmes sont renvoyés à l'équipe de développement.<br>
Mais la reconception et le développement d'un grand nombre de fonctionnalités de base peuvent s'avérer coûteux.<br><br>
Que se passe-t-il lorsque des vulnérabilités apparaissent après la sortie du logiciel ?<br>
Puisqu'il est déjà en production, vous ne pouvez pas revenir en arrière et réparer le code original.<br>
Maintenant, vous devez créer un patch et espérer que les clients l'appliqueront.

<h3>Ajoutez la sécurité au cycle de vie du développement logiciel</h3>
De nombreuses organisations, dont l'OWASP, ont proposé un cycle de vie intégré de la sécurité (SDLC) ou un cycle de vie de développement logiciel sécurisé (SSDLC).<br>
Il y a encore beaucoup de débats à ce sujet ; cependant, dans la production d'applications web à grande échelle, la sécurité sera très probablement intégrée dans le modèle SDLC déjà utilisé par les entreprises.<br>
Dans ce cours, nous avons vu comment intégrer la sécurité dans les phases de conception et de mise en œuvre du cycle de vie.

<h3>En résumé</h3>
<ul>
  <li>Le cycle SDLC est utilisé par les organisations qui ont de grands projets logiciels.</li>
  <li>Traditionnellement, il n'inclut pas le développement sécurisé comme partie intégrante du processus.</li>
  <li>Le fait de ne pas assurer la sécurité dans le cycle SDLC entraîne une augmentation du temps et de l'argent consacrés à la correction du code non sécurisé.</li>
  <li>Utilisez SSDLC pour ajouter la sensibilisation à la sécurité dans chaque phase du SDLC.</li>
</ul>



<h5><a href="#sommaire">Sommaire</a></h5>
  
<h2 id="owasp_top10">3.3 OWASP TOP TEN 2017</h2> 
<ol>
  <li><strong>L’injection :</strong><br>
    elle permet d’injecter du code arbitraire pour effectuer des actions qui seront interprétées par l’application.<br>
    Pour bloquer ce genre d’attaque, il est possible d’utiliser des fonctions sécurisées ou encore de valider les entrées utilisateurs.</li>
  <li><strong>Le piratage de session :</strong><br>
    il se produit lorsque le système d’authentification a été contourné, par exemple en utilisant la technique de force brute.<br>
    Pour se protéger contre ce type d’attaque, il faudra non seulement forcer les utilisateurs à utiliser des mots de passe forts, mais également sécuriser l’utilisation des cookies de session, par exemple.</li>
  <li><strong>L'exposition de données sensibles :</strong><br>
    elle se produit en cas de fuite de données, par exemple.<br>
    Pour se protéger contre ce type d’attaque, il faudra utiliser des solutions de chiffrement pour sécuriser les données en transit et celles stockées sur l’application.</li>
  <li><strong>Les entités externes XML (XXE) :</strong><br>les vulnérabilités XXE peuvent être utilisées pour accéder à des données internes de l’application normalement non accessibles.<br>
    Pour éviter ce type d’attaque, il est possible de désactiver les entités externes. </li>
  <li><strong>Le contournement des contrôles d'accès :</strong><br>les contrôles d’accès permettent d’empêcher un utilisateur d’accéder aux données d’un autre utilisateur.<br>
    Pour éviter qu’un  attaquant puisse exploiter cette vulnérabilité, assurez-vous que toutes les pages de votre application ont un contrôle d'authentification. </li>
  <li><strong>Les mauvaises configurations de sécurité :</strong><br>
    elles peuvent être à l’origine de nombreuses attaques.<br>
    Assurez-vous de garder à jour les composants de votre application pour éviter qu’une vulnérabilité ne soit exploitée. </li>
  <li><strong>Les scripts XSS (cross-site scripting) :</strong><br>
    les failles XSS permettent à un attaquant d’injecter du code JavaScript.<br>
    Utilisez la validation et la transformation des entrées utilisateurs pour les éviter.</li>
  <li><strong>La désérialisation non sécurisée :</strong><br>
    cette vulnérabilité peut permettre à un attaquant de mener une attaque d’élévation de privilège, de replay ou encore d’injection.<br>
     Pour éviter ce type d’attaque, il est possible d’implémenter des contrôles sur l’état du code. </li>
  <li><strong>L'utilisation de composants contenant des vulnérabilités connues :</strong><br>
    une application est basée sur de nombreux composants.<br>
    Pour éviter l’exploitation d’une vulnérabilité, il faudra maintenir à jour et identifier les éléments de votre application.</li>
  <li><strong>Le manque de monitoring et de surveillance :</strong><br>
    le monitoring et la surveillance permettront de détecter une intrusion ou un comportement suspicieux au plus tôt.<br>
    Vérifiez régulièrement vos logs et mettez en place des reportings.</li>
</ol>








  </body>
  </html>
  



  <div class="inner_code"></div> 
  <h5><a href="#sommaire">Sommaire</a></h5>
  
    <h2 id="1">- 1 -</h2> 
  
    <a href="" target='_blank'></a>
  <!--question################-->
  
  <div class="question"><img src="media/question-circle-regular.svg"></div><br>
     
    <!---insertion d'une figure avec commentaire-->
    <figure>
      <img src="image/" alt="">
      <figcaption></figcaption>
    </figure>
    <span style="color:rgb(0, 0, 0);">.</span> <!-- point invisible code-->
    <span style="color:rgb(206, 201, 201);">.</span> <!-- point invisible inner_code-->
    <span style="color:rgb(140, 140, 140);"></span> <!-- commentaire -->
    <span style="color:red;"></span> <!--Ligne à souligner dans le code################-->
    <span class="keyboard"></span>
      <!--########### Commandes importantes border noire ########-->
      <strong  style="border: 2px solid black;display:inline-block;padding: 5px;"></strong><br/><br/>
  <!--########### Tableaux double  ##########-->
  <div class="tableau_double" style="display: flex;">
    <strong  style="border: 2px solid black; display:inline-block; padding: 5px;">
      <span style="color:red;border: 1px solid red;padding:2px;">Titre1</span><br/>
      
    </strong><br/><br/>
    
    <strong  style="border: 2px solid black; display:inline-block; padding: 5px;">
      <span style="color:red;border: 1px solid red;padding:2px;">Titre2</span><br/>
      
      
    </strong><br/><br/>
  </div><br/>

  
  <!--#### Liste sans les points ######-->
  
  <ul style=" list-style-type: none;">
  
  
  <!--############## Tableaux ############-->
  <table>
    <caption>Entête du tableau</caption>
  
    <tr>
        <th>Titre 1</th>
        <th>Titre 2</th>
        <th>Titre 3</th>
    </tr>
    <tr>
        <td>Donnée 1</td>
        <td>Donnée 2</td>
        <td>Donnée 3</td>
    </tr>
    <tr>
        <td>Donnée 1</td>
        <td>Donnée 2</td>
        <td>Donnée 2</td>
    </tr>
  </table>
  <!--############## Tableaux FIN ############-->
  
